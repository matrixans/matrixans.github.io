webpackJsonp([0],[/*!********************************!*\
  !*** ./js/commonpage_entry.js ***!
  \********************************/
function(t,e,s){function i(t,e){var s=a("<script>");s.prop("src",t.src),t.type&&s.prop("type",t.type),t.async&&(s.prop("async",t.async),s.prop("defer",t.async)),e(s),a("body").append("<!-- "+t.name+" starts -->").append(s).append("<!-- "+t.name+" ends -->")}var o="./components/",n=s(/*! . */1)(o+"jquery.js"),a=n;s(/*! . */3)(o+"bootstrap.js")(this,a);var r=s(/*! . */5)(o+"mensu-blog.js"),d=s(/*! . */7)(o+"hux-blog.js"),l=s(/*! . */10)(o+"jquery.tagcloud.js"),c=s(/*! . */12)(o+"duoshuo-embed.js");a(document).ready(function(){d(this,a),r(this,a),siteOptions.tagcloud&&(l(this,a),a.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},a("#tag_cloud a").tagcloud()),siteOptions.duoshuoQuery&&c(),siteOptions.disqus&&(window.disqus_config=function(){window.page.url=siteOptions.disqus.page.url,window.page.identifier=siteOptions.disqus.page.id},siteOptions.disqus.count.name="disqus count",i(siteOptions.disqus.count),i({src:siteOptions.disqus.src,name:"disqus comment"},function(t){t.attr("data-timetamp",new Date)})),siteOptions.mathjax&&(i({type:"text/x-mathjax-config"}),window.MathJax.Hub.Config({tex2jax:{inlineMath:[["$$","$$"],["\\(","\\)"]]}}),i({src:siteOptions.mathjax.src,async:!0}))})},,,/*!******************************!*\
  !*** ./js ^.*bootstrap\.js$ ***!
  \******************************/
function(t,e,s){function i(t){return s(o(t))}function o(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./components/bootstrap.js":4};i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=3},/*!************************************!*\
  !*** ./js/components/bootstrap.js ***!
  \************************************/
function(t,e,s){var i,o,n;/*!
	 * Bootstrap v3.3.2 (http://getbootstrap.com)
	 * Copyright 2011-2015 Twitter, Inc.
	 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
	 */
!function(a){"object"==typeof t&&t.exports?t.exports=function(t,e){/*! ./jquery.js */
/*! ./jquery.js */
return void 0===e&&(e="undefined"!=typeof window?s(2):s(2)(t)),a(e),e}:(o=[s(/*! ./jquery.js */2)],i=a,n="function"==typeof i?i.apply(e,o):i,!(void 0!==n&&(t.exports=n)))}(function(t){if("undefined"==typeof t)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(t),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var s in e)if(void 0!==t.style[s])return{end:e[s]};return!1}t.fn.emulateTransitionEnd=function(e){var s=!1,i=this;t(this).one("bsTransitionEnd",function(){s=!0});var o=function(){s||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var s=t(this),o=s.data("bs.alert");o||s.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(s)})}var s='[data-dismiss="alert"]',i=function(e){t(e).on("click",s,this.close)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function s(){a.detach().trigger("closed.bs.alert").remove()}var o=t(this),n=o.attr("data-target");n||(n=o.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var a=t(n);e&&e.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",s,i.prototype.close)}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),n="object"==typeof e&&e;o||i.data("bs.button",o=new s(this,n)),"toggle"==e?o.toggle():e&&o.setState(e)})}var s=function(e,i){this.$element=t(e),this.options=t.extend({},s.DEFAULTS,i),this.isLoading=!1};s.VERSION="3.3.2",s.DEFAULTS={loadingText:"loading..."},s.prototype.setState=function(e){var s="disabled",i=this.$element,o=i.is("input")?"val":"html",n=i.data();e+="Text",null==n.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==n[e]?this.options[e]:n[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(s).attr(s,s)):this.isLoading&&(this.isLoading=!1,i.removeClass(s).removeAttr(s))},this),0)},s.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var s=this.$element.find("input");"radio"==s.prop("type")&&(s.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&s.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=s,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(s){var i=t(s.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),s.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),n=t.extend({},s.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:n.slide;o||i.data("bs.carousel",o=new s(this,n)),"number"==typeof e?o.to(e):a?o[a]():n.interval&&o.pause().cycle()})}var s=function(e,s){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=s,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};s.VERSION="3.3.2",s.TRANSITION_DURATION=600,s.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},s.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},s.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},s.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},s.prototype.getItemForDirection=function(t,e){var s=this.getItemIndex(e),i="prev"==t&&0===s||"next"==t&&s==this.$items.length-1;if(i&&!this.options.wrap)return e;var o="prev"==t?-1:1,n=(s+o)%this.$items.length;return this.$items.eq(n)},s.prototype.to=function(t){var e=this,s=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):s==t?this.pause().cycle():this.slide(t>s?"next":"prev",this.$items.eq(t))},s.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},s.prototype.next=function(){if(!this.sliding)return this.slide("next")},s.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},s.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),n=i||this.getItemForDirection(e,o),a=this.interval,r="next"==e?"left":"right",d=this;if(n.hasClass("active"))return this.sliding=!1;var l=n[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:r});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(n)]);u&&u.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:l,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,o.addClass(r),n.addClass(r),o.one("bsTransitionEnd",function(){n.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),d.sliding=!1,setTimeout(function(){d.$element.trigger(h)},0)}).emulateTransitionEnd(s.TRANSITION_DURATION)):(o.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=s,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(s){var i,o=t(this),n=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),o.data()),r=o.attr("data-slide-to");r&&(a.interval=!1),e.call(n,a),r&&n.data("bs.carousel").to(r),s.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var s=t(this);e.call(s,s.data())})})}(t),+function(t){"use strict";function e(e){var s,i=e.attr("data-target")||(s=e.attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function s(e){return this.each(function(){var s=t(this),o=s.data("bs.collapse"),n=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);!o&&n.toggle&&"show"==e&&(n.toggle=!1),o||s.data("bs.collapse",o=new i(this,n)),"string"==typeof e&&o[e]()})}var i=function(e,s){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,s),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.2",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){o&&o.length&&(s.call(o,"hide"),e||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var d=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][d])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var s=this.dimension();this.$element[s](this.$element[s]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[s](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(s,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var s=t.hasClass("in");t.attr("aria-expanded",s),e.toggleClass("collapsed",!s).attr("aria-expanded",s)};var o=t.fn.collapse;t.fn.collapse=s,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var n=e(o),a=n.data("bs.collapse"),r=a?"toggle":t.extend({},o.data(),{trigger:this});s.call(n,r)})}(t),+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(n).each(function(){var i=t(this),o=s(i),n={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",n)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",n)))}))}function s(e){var s=e.attr("data-target");s||(s=e.attr("href"),s=s&&/#[A-Za-z]/.test(s)&&s.replace(/.*(?=#[^\s]*$)/,""));var i=s&&t(s);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var s=t(this),i=s.data("bs.dropdown");i||s.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(s)})}var o=".dropdown-backdrop",n='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.2",a.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var n=s(o),a=n.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(n.trigger(i=t.Event("show.bs.dropdown",r)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=s(i),a=o.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&o.find(n).trigger("focus"),i.trigger("click");var r=" li:not(.divider):visible a",d=o.find('[role="menu"]'+r+', [role="listbox"]'+r);if(d.length){var l=d.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<d.length-1&&l++,~l||(l=0),d.eq(l).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,a.prototype.toggle).on("keydown.bs.dropdown.data-api",n,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(t),+function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),n=o.data("bs.modal"),a=t.extend({},s.DEFAULTS,o.data(),"object"==typeof e&&e);n||o.data("bs.modal",n=new s(this,a)),"string"==typeof e?n[e](i):a.show&&n.show(i)})}var s=function(e,s){this.options=s,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};s.VERSION="3.3.2",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},s.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(s.TRANSITION_DURATION):i.$element.trigger("focus").trigger(n)}))},s.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},s.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},s.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},s.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=s,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(s){var i=t(this),o=i.attr("href"),n=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},n.data(),i.data());i.is("a")&&s.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(n,a,this)})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),n="object"==typeof e&&e;(o||"destroy"!=e)&&(o||i.data("bs.tooltip",o=new s(this,n)),"string"==typeof e&&o[e]())})}var s=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};s.VERSION="3.3.2",s.TRANSITION_DURATION=150,s.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},s.prototype.init=function(e,s,i){this.enabled=!0,this.type=e,this.$element=t(s),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var o=this.options.trigger.split(" "),n=o.length;n--;){var a=o[n];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",d="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(d+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},s.prototype.getDelegateOptions=function(){var e={},s=this.getDefaults();return this._options&&t.each(this._options,function(t,i){s[t]!=i&&(e[t]=i)}),e},s.prototype.enter=function(e){var s=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return s&&s.$tip&&s.$tip.is(":visible")?void(s.hoverState="in"):(s||(s=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,s)),clearTimeout(s.timeout),s.hoverState="in",s.options.delay&&s.options.delay.show?void(s.timeout=setTimeout(function(){"in"==s.hoverState&&s.show()},s.options.delay.show)):s.show())},s.prototype.leave=function(e){var s=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return s||(s=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,s)),clearTimeout(s.timeout),s.hoverState="out",s.options.delay&&s.options.delay.hide?void(s.timeout=setTimeout(function(){"out"==s.hoverState&&s.hide()},s.options.delay.hide)):s.hide()},s.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,n=this.tip(),a=this.getUID(this.type);this.setContent(),n.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,d=/\s?auto?\s?/i,l=d.test(r);l&&(r=r.replace(d,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var c=this.getPosition(),u=n[0].offsetWidth,h=n[0].offsetHeight;if(l){var p=r,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);r="bottom"==r&&c.bottom+h>m.bottom?"top":"top"==r&&c.top-h<m.top?"bottom":"right"==r&&c.right+u>m.width?"left":"left"==r&&c.left-u<m.left?"right":r,n.removeClass(p).addClass(r)}var v=this.getCalculatedOffset(r,c,u,h);this.applyPlacement(v,r);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",g).emulateTransitionEnd(s.TRANSITION_DURATION):g()}},s.prototype.applyPlacement=function(e,s){var i=this.tip(),o=i[0].offsetWidth,n=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),r=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var d=i[0].offsetWidth,l=i[0].offsetHeight;"top"==s&&l!=n&&(e.top=e.top+n-l);var c=this.getViewportAdjustedDelta(s,e,d,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(s),h=u?2*c.left-o+d:2*c.top-n+l,p=u?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],u)},s.prototype.replaceArrow=function(t,e,s){this.arrow().css(s?"left":"top","50%").css(s?"top":"left","")},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},s.prototype.hide=function(e){function i(){"in"!=o.hoverState&&n.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,n=this.tip(),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(s.TRANSITION_DURATION):i(),this.hoverState=null,this},s.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=function(e){e=e||this.$element;var s=e[0],i="BODY"==s.tagName,o=s.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var n=i?{top:0,left:0}:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,r,n)},s.prototype.getCalculatedOffset=function(t,e,s,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-s/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-s/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-s}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},s.prototype.getViewportAdjustedDelta=function(t,e,s,i){var o={top:0,left:0};if(!this.$viewport)return o;var n=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-n-a.scroll,d=e.top+n-a.scroll+i;r<a.top?o.top=a.top-r:d>a.top+a.height&&(o.top=a.top+a.height-d)}else{var l=e.left-n,c=e.left+n+s;l<a.left?o.left=a.left-l:c>a.width&&(o.left=a.left+a.width-c)}return o},s.prototype.getTitle=function(){var t,e=this.$element,s=this.options;return t=e.attr("data-original-title")||("function"==typeof s.title?s.title.call(e[0]):s.title)},s.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},s.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=function(){this.enabled=!this.enabled},s.prototype.toggle=function(e){var s=this;e&&(s=t(e.currentTarget).data("bs."+this.type),s||(s=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,s))),s.tip().hasClass("in")?s.leave(s):s.enter(s)},s.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=s,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),n="object"==typeof e&&e;(o||"destroy"!=e)&&(o||i.data("bs.popover",o=new s(this,n)),"string"==typeof e&&o[e]())})}var s=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");s.VERSION="3.3.2",s.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),s.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),s.prototype.constructor=s,s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),s=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof s?"html":"append":"text"](s),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},s.prototype.hasContent=function(){return this.getTitle()||this.getContent()},s.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},s.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=s,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(t),+function(t){"use strict";function e(s,i){var o=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(s).is("body")?window:s),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o),this.refresh(),this.process()}function s(s){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),n="object"==typeof s&&s;o||i.data("bs.scrollspy",o=new e(this,n)),"string"==typeof s&&o[s]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",s=0;t.isWindow(this.$scrollElement[0])||(e="position",s=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),o=i.data("target")||i.attr("href"),n=/^#./.test(o)&&t(o);return n&&n.length&&n.is(":visible")&&[[n[e]().top+s,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,s=this.getScrollHeight(),i=this.options.offset+s-this.$scrollElement.height(),o=this.offsets,n=this.targets,a=this.activeTarget;if(this.scrollHeight!=s&&this.refresh(),e>=i)return a!=(t=n[n.length-1])&&this.activate(t);if(a&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)a!=n[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var s=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(s).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=s,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);s.call(e,e.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new s(this)),"string"==typeof e&&o[e]()})}var s=function(e){this.element=t(e)};s.VERSION="3.3.2",s.TRANSITION_DURATION=150,s.prototype.show=function(){var e=this.element,s=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=s.find(".active:last a"),n=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(n),e.trigger(a),!a.isDefaultPrevented()&&!n.isDefaultPrevented()){var r=t(i);this.activate(e.closest("li"),s),this.activate(r,r.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",
relatedTarget:o[0]})})}}},s.prototype.activate=function(e,i,o){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),r=o&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",n).emulateTransitionEnd(s.TRANSITION_DURATION):n(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=s,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(s){s.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),n="object"==typeof e&&e;o||i.data("bs.affix",o=new s(this,n)),"string"==typeof e&&o[e]()})}var s=function(e,i){this.options=t.extend({},s.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};s.VERSION="3.3.2",s.RESET="affix affix-top affix-bottom",s.DEFAULTS={offset:0,target:window},s.prototype.getState=function(t,e,s,i){var o=this.$target.scrollTop(),n=this.$element.offset(),a=this.$target.height();if(null!=s&&"top"==this.affixed)return o<s&&"top";if("bottom"==this.affixed)return null!=s?!(o+this.unpin<=n.top)&&"bottom":!(o+a<=t-i)&&"bottom";var r=null==this.affixed,d=r?o:n.top,l=r?a:e;return null!=s&&o<=s?"top":null!=i&&d+l>=t-i&&"bottom"},s.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(s.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},s.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},s.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,n=i.bottom,a=t("body").height();"object"!=typeof i&&(n=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof n&&(n=i.bottom(this.$element));var r=this.getState(a,e,o,n);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var d="affix"+(r?"-"+r:""),l=t.Event(d+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(s.RESET).addClass(d).trigger(d.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-n})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=s,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var s=t(this),i=s.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(s,i)})})}(t)})},/*!********************************!*\
  !*** ./js ^.*mensu\-blog\.js$ ***!
  \********************************/
function(t,e,s){function i(t){return s(o(t))}function o(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./components/mensu-blog.js":6};i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=5},/*!*************************************!*\
  !*** ./js/components/mensu-blog.js ***!
  \*************************************/
function(t,e,s){var i,o,n;!function(a){"object"==typeof t&&t.exports&&(t.exports=function(t,e){/*! ./jquery.js */
/*! ./jquery.js */
return void 0===e&&(e="undefined"!=typeof window?s(2):s(2)(t)),a(e),e}),o=[s(/*! ./jquery.js */2)],i=a,n="function"==typeof i?i.apply(e,o):i,!(void 0!==n&&(t.exports=n))}(function(t){function e(){t("ul.ds-share-icons-16").on("mouseover",function(){t(".ds-douban").text("Douban"),t(".ds-youdao").text("Youdao CloudNote"),t("ul.ds-share-icons-16").off("mouseover")})}var s="0px",i=0,o=null,n=null,a=null,r=null;t(document).ready(function(){o=t(".pseudo-ds-meta"),n=t(".ds-share"),a=t(".ds-thread"),r=t(".ds-meta"),e()}),t("body").on("resize",function(){var t=n[0].offsetTop-a[0].offsetTop-5+"px";s!=t&&(s=r[0].style.top=t);var e=class_dsMeta[0].clientWidth;i!=e&&(o[0].style.width=e>0?e+20+"px":"0",i=e)});var d=t("#backtotop");d.on("click",function(){var e=document.body,s=e.scrollTop,i=s/30;i>1500?i=1500:i<200&&(i=200),t("body").animate({scrollTop:0},i,"swing")}),t(".view-again").on("click",function(){var t=this.parentNode.nextElementSibling.firstChild,e=t.src;t.src="https://www.baidu.com/img/bd_logo1.png",t.src=e})})},/*!******************************!*\
  !*** ./js ^.*hux\-blog\.js$ ***!
  \******************************/
function(t,e,s){function i(t){return s(o(t))}function o(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./components/hux-blog.js":8};i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=7},/*!***********************************!*\
  !*** ./js/components/hux-blog.js ***!
  \***********************************/
function(t,e,s){var i,o,n;/*!
	 * Clean Blog v1.0.0 (http://startbootstrap.com)
	 * Copyright 2015 Start Bootstrap
	 * Licensed under Apache 2.0 (https://github.com/IronSummitMedia/startbootstrap/blob/gh-pages/LICENSE)
	 */
/*!
	 * Hux Blog v1.6.0 (http://startbootstrap.com)
	 * Copyright 2016 @huxpro
	 * Licensed under Apache 2.0 
	 */
!function(a){"object"==typeof t&&t.exports&&(t.exports=function(t,e){/*! ./jquery.js */
/*! ./jquery.js */
return void 0===e&&(e="undefined"!=typeof window?s(2):s(2)(t)),a(e),e}),o=[s(/*! ./jquery.js */2)],i=a,n="function"==typeof i?i.apply(e,o):i,!(void 0!==n&&(t.exports=n))}(function(t){t(document).ready(function(){t("[data-toggle='tooltip']").tooltip(),s(/*! ./top-nav.js */9)(this,t)})})},/*!**********************************!*\
  !*** ./js/components/top-nav.js ***!
  \**********************************/
function(t,e,s){var i,o,n;!function(a){"object"==typeof t&&t.exports&&(t.exports=function(t,e){/*! ./jquery.js */
/*! ./jquery.js */
return void 0===e&&(e="undefined"!=typeof window?s(2):s(2)(t)),a(e),e}),o=[s(/*! ./jquery.js */2)],i=a,n="function"==typeof i?i.apply(e,o):i,!(void 0!==n&&(t.exports=n))}(function(t){function e(t){t>d+20?a.addClass("fixed"):a.removeClass("fixed")}var s=document.querySelector(".navbar-toggle"),i=document.querySelector("#huxblog_navbar"),o=document.querySelector(".navbar-collapse"),n={close:function(){i.className=" ",setTimeout(function(){i.className.indexOf("in")<0&&(o.style.height="0px")},400)},open:function(){o.style.height="auto",i.className+=" in"}};s.addEventListener("click",function(t){i.className.indexOf("in")>0?n.close():n.open()}),document.addEventListener("click",function(t){t.target!=s&&"icon-bar"!=t.target.className&&n.close()});var a=t(".side-catalog"),r=t(".navbar-custom").height(),d=t(".intro-header .container").height();t(window).on("scroll",{previousTop:0},function(){var s=t(window).scrollTop();s<this.previousTop?s>0&&t(".navbar-custom").hasClass("is-fixed")?t(".navbar-custom").addClass("is-visible"):t(".navbar-custom").removeClass("is-visible is-fixed"):s>this.previousTop&&(t(".navbar-custom").removeClass("is-visible"),s>r&&!t(".navbar-custom").hasClass("is-fixed")&&t(".navbar-custom").addClass("is-fixed")),this.previousTop=s,a.show(),e(s)}),e(t(window).scrollTop())})},/*!*************************************!*\
  !*** ./js ^.*jquery\.tagcloud\.js$ ***!
  \*************************************/
function(t,e,s){function i(t){return s(o(t))}function o(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./components/jquery.tagcloud.js":11};i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=10},/*!******************************************!*\
  !*** ./js/components/jquery.tagcloud.js ***!
  \******************************************/
function(t,e,s){var i,o,n;!function(a){"object"==typeof t&&t.exports?t.exports=function(t,e){/*! ./jquery.js */
/*! ./jquery.js */
return void 0===e&&(e="undefined"!=typeof window?s(2):s(2)(t)),a(e),e}:(o=[s(/*! ./jquery.js */2)],i=a,n="function"==typeof i?i.apply(e,o):i,!(void 0!==n&&(t.exports=n)))}(function(t){function e(t){return 4==t.length&&(t=a.map(/\w+/.exec(t),function(t){return t+t}).join("")),hex=/(\w{2})(\w{2})(\w{2})/.exec(t),[parseInt(hex[1],16),parseInt(hex[2],16),parseInt(hex[3],16)]}function s(t){return"#"+a.map(t,function(t){return hex=t.toString(16),hex=1==hex.length?"0"+hex:hex,hex}).join("")}function i(t,s){return a.map(e(t.end),function(i,o){return(i-e(t.start)[o])/s})}function o(t,i,o){return rgb=a.map(e(t.start),function(t,e){return ref=Math.round(t+i[e]*o),ref>255?ref=255:ref<0&&(ref=0),ref}),s(rgb)}function n(t,e){return t-e}var a=t;t.fn.tagcloud=function(e){var s=t.extend({},t.fn.tagcloud.defaults,e);return tagWeights=this.map(function(){return t(this).attr("rel")}),tagWeights=a.makeArray(tagWeights).sort(n),lowest=tagWeights[0],highest=tagWeights.pop(),range=highest-lowest,0===range&&(range=1),s.size&&(fontIncr=(s.size.end-s.size.start)/range),s.color&&(colorIncr=i(s.color,range)),this.each(function(){weighting=t(this).attr("rel")-lowest,s.size&&t(this).css({"font-size":s.size.start+weighting*fontIncr+s.size.unit}),s.color&&t(this).css({backgroundColor:o(s.color,colorIncr,weighting)})})},t.fn.tagcloud.defaults={size:{start:14,end:18,unit:"pt"}}})},/*!***********************************!*\
  !*** ./js ^.*duoshuo\-embed\.js$ ***!
  \***********************************/
function(t,e,s){function i(t){return s(o(t))}function o(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./components/duoshuo-embed.js":13};i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=12},/*!****************************************!*\
  !*** ./js/components/duoshuo-embed.js ***!
  \****************************************/
function(t,e,s){var i,o;!function(s){"object"==typeof t&&t.exports?t.exports=function(t){return s(t)}:(i=[],o=function(){return s(duoshuoQuery)}.apply(e,i),!(void 0!==o&&(t.exports=o)))}(function(t){!function(t,e,s){function i(){return c.short_name?g+"//"+c.short_name+"."+S.DOMAIN:S.REMOTE}function o(){function e(){for(var e;e=y.shift();){var i=e.url,o=new s(e.title,{dir:"auto",icon:e.iconUrl,body:e.body});try{o.onclick=function(){t.focus(),p.href=i,o.close()}}catch(n){}setTimeout(function(){o.close&&o.close()},8e3)}}var s=t.Notification;"Notification"in t&&"denied"!==s.permission&&("granted"===s.permission&&e(),s.requestPermission(function(t){"granted"===t&&e()}))}function n(){return 0==at.data.user_id}function a(t){S.theme=t,"none"!=t&&r.injectStylesheet(S.STATIC_URL+"/styles/embed"+(t?"."+t+".css?"+P[t]:"."+short_name)+".css")}var r={},d=e.getElementsByTagName("head")[0]||e.getElementsByTagName("body")[0];if(r.extend=function(t,e){for(var s in e)t[s]=e[s];return t},r.injectScript=function(i,o){var n=e.createElement("script"),a=e.head||e.getElementsByTagName("head")[0]||e.documentElement;n.type="text/javascript",n.src=i,n.async="async",n.charset="utf-8",o&&(n.onload=n.onreadystatechange=function(e,i){var r=i||!n.readyState||/loaded|complete/.test(n.readyState);r&&(n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),n=s,i||o.call(t))}),a.insertBefore(n,a.firstChild)},r.injectStylesheet=function(t){var s=e.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=t,d.appendChild(s)},r.injectStyle=function(t){var s=e.createElement("style");return s.type="text/css",d.appendChild(s),t=t.replace(/\}/g,"}\n"),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),s},r.getCookie=function(t){for(var i,o,n,a=" "+t+"=",r=e.cookie.split(";"),d=0;d<r.length;d++)if(i=" "+r[d],o=i.indexOf(a),o>=0&&o+a.length==(n=i.indexOf("=")+1))return decodeURIComponent(i.substring(n,i.length).replace(/\+/g,""));return s},r.param=function(t){var e=[];for(var i in t)t[i]!=s&&e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},r.cssProperty=function(t,s){var i=(e.body||e.documentElement).style;if("undefined"==typeof i)return!1;if("string"==typeof i[t])return!s||t;for(var o=["Moz","Webkit","ms"],t=t.charAt(0).toUpperCase()+t.substr(1),n=0;n<o.length;n++)if("string"==typeof i[o[n]+t])return!s||o[n]+t},!t.DUOSHUO){for(var l in Object.prototype)return alert("Object.prototype 不为空，请不要给 Object.prototype 设置方法");var c,u,h=t.JSON,p=t.location,f=t.loginWithListMLHttpRequest,m=h&&h.stringify&&t.localStorage,v=t.navigator.userAgent,g="https:"==e.location.protocol?"https:":"http:",b=0,y=[],w=u=function(){function t(t){return e[t]||"&amp;"}var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[<>"'`]/g,i=/[&<>"'`]/;return function(e){return null==e||e===!1?"":i.test(e)?e.replace(s,t):e}}(),x=function(t){if(t.match(/^(http|https):/))return t;var s=e.createElement("a");return s.href=t,I.hrefNormalized?s.href:s.getAttribute("href",4)},T=function(t){return function(){return t}},_=function(){for(var t={},e=0;e<arguments.length;e++)arguments[e]&&r.extend(t,arguments[e]);var s=r.param(t);return s?"?"+s:""},k=function(){var t=r.getCookie("duoshuo_token");return t?{jwt:t}:c.remote_auth?{short_name:c.short_name,remote_auth:c.remote_auth}:s},C=function(){if(!c&&(c=t.duoshuoQuery)){if(!c.short_name||"your_duoshuo_short_name"===c.short_name)return c=s,void alert("你还没有设置多说域名(duoshuoQuery.short_name)，填入已有域名或创建新站点：http://duoshuo.com/create-site/");ot.trigger("queryDefined")}return c},$=function(t){return t&&t.error&&t.warn?t:{error:function(){},log:function(){},warn:function(){}}}(t.console),S=t.DUOSHUO={sourceName:{weibo:"Sina Weibo",qq:"QQ",qzone:"Qzone",qqt:"Tencent Weibo",google:"Google+",wechat:"Wechat",weixin:"Wechat",facebook:"Facebook",twitter:"Twitter",linkedin:"Linkedin"},serviceNames:{weibo:"Weibo",qq:"QQ",douban:"Douban",google:"Google+",wechat:"Wechat",weixin:"Wechat",facebook:"Facebook",twitter:"Twitter",linkedin:"Linkedin"},parseDate:function(t){return t.parse("2011-10-28T00:00:00+08:00")&&function(e){return new t(e)}||t.parse("2011/10/28T00:00:00+0800")&&function(e){return new t(e.replace(/-/g,"/").replace(/:(\d\d)$/,"$1"))}||t.parse("2011/10/28 00:00:00+0800")&&function(e){return new t(e.replace(/-/g,"/").replace(/:(\d\d)$/,"$1").replace("T"," "))}||function(e){return new t(e)}}(Date),fullTime:function(t){var e=S.parseDate(t),s=function(t){return t>9?t:"0"+t};return e.getFullYear()+"-"+s(parseInt(e.getMonth())+1)+"-"+s(e.getDate())+" "+e.toLocaleTimeString()},elapsedTime:function(t){var e=S.parseDate(t),s=new Date,i=(s-b-e)/1e3,o="";if(10>i)o="Just now";else if(60>i){var n=Math.round(i);o=1==n?"1 second ago":n+" seconds ago"}else if(3600>i){var n=Math.round(i/60);o=1==n?"1 minute ago":n+" minutes ago"}else if(86400>i){var n=Math.round(i/3600);o=1==n?"1 hour ago":n+" hours ago"}else{var a=function(t){return t>9?t:"0"+t};o=(s.getFullYear()==e.getFullYear()?"":e.getFullYear()+"-")+a(parseInt(e.getMonth())+1)+"-"+a(e.getDate())}return o},compileStyle:function(t){var e="",s={};if(s.textbox="#ds-thread #ds-reset .ds-replybox .ds-textarea-wrapper",!t)return e;for(var i in t)e+=s[i]+"{"+t[i]+"}\n";return e},init:function(t,e){t&&!O[t]&&(O[t]=e||{type:"EmbedThread"}),S.initView&&S.initView()}},E=e.all,I=S.support=function(){var s=e.createElement("div");s.innerHTML='<a href="/a" style="opacity:.55;">a</a><input type="checkbox"/>';var i=s.getElementsByTagName("a")[0],o=s.getElementsByTagName("input")[0],n={placeholder:"placeholder"in o,touch:"ontouchstart"in t||"onmsgesturechange"in t,opacity:/^0.55$/.test(i.style.opacity),hrefNormalized:"/a"===i.getAttribute("href"),iOS:v.match(/ \((iPad|iPhone|iPod);( U;)? CPU( iPhone)? OS /),android:v.match(/ \(Linux; U; Android /)};return n.ie6=!f&&"undefined"==typeof s.style.maxHeight,n.authInWin=t.postMessage&&t.screen.width>800&&!n.iOS&&!n.android&&p.origin,n}(),O=S.selectors={".ds-thread":{type:"EmbedThread"},".ds-recent-comments":{type:"RecentComments"},".ds-recent-visitors":{type:"RecentVisitors"},".ds-top-users":{type:"TopUsers"},".ds-top-threads":{type:"TopThreads"},".ds-login":{type:"LoginWidget"},".ds-thread-count":{type:"ThreadCount"},".ds-share":{type:"ShareWidget"}},N=S.openDialog=function(t){return S.dialog!==s&&S.dialog.el.remove(),S.dialog=new st.Dialog(tt.dialog(t)).open()},j=S.smilies={};S.require=function(){function e(t){var e=L[t]?"?"+L[t]+".js":"";return S.STATIC_URL+"/libs/"+t+".js"+e}var s={mzadxN:"undefined"!=typeof mzadxN};return"undefined"!=typeof jQuery&&jQuery.fn.jquery>="1.5"&&(s["embed.compat"]=!0,S.jQuery=t.jQuery),function(t,i){if("string"==typeof t)s[t]?i():r.injectScript(e(t),function(){s[t]=!0,i()});else if("object"==typeof t){var o,n=!0;for(o=0;o<t.length;o++)(function(a){s[t[o]]||(n=!1,r.injectScript(e(a),function(){s[a]=!0;for(var e=0;e<t.length;e++)if(!s[t[e]])return;i()}))})(t[o]);n&&i()}}}();for(var q=0,D=["EmbedThread","RecentComments","RecentVisitors","TopUsers","TopThreads","LoginWidget","ThreadCount"];q<D.length;q++)S[D[q]]=function(t){return function(e,s){s=s||{},s.type=t,e&&!O[e]&&(O[e]=s),S.initSelector&&S.initSelector(e,s)}}(D[q]),S["create"+D[q]]=function(t){return function(s,i){var o=e.createElement(s);for(var n in i)o.setAttribute("data-"+n,i[n]);return S[t](o),o}}(D[q]);S.RecentCommentsWidget=S.RecentComments;var A=S.API={ajax:function(t,e,o,n,a){function d(t){var e=t.getResponseHeader("Date");e&&(b=new Date-new Date(e))}function l(t,e,s){var i,o,r,l=e;if(t>=200&&300>t||304===t)if(304===t)l="notmodified",r=!0;else try{i=h.parse(s),l="success",r=!0}catch(c){l="parsererror",o=c}else{o=l,(!l||t)&&(l="error",0>t&&(t=0));try{i=h.parse(s)}catch(c){l="parsererror",o=c}}r?n&&n(i):"parseerror"===l?$.error("解析错误: "+s):($.error("出错啦("+i.code+"): "+i.errorMessage),a&&a(i),i.errorTrace&&$.error(i.errorTrace)),d(m)}var u=r.getCookie("duoshuo_token");o=o||{},o.v=S.version,u?o.jwt=u:c.remote_auth&&(o.remote_auth=c.remote_auth);var p=f&&h&&h.parse;if(p){var m=new f,v=!!m&&"withCredentials"in m;if(v){var g;return m.open(t,i()+"/api/"+e+".json"+("GET"==t?"?"+r.param(o):""),!0),m.withCredentials=!0,m.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),m.send("GET"==t?null:r.param(o)),g=function(t,e){var i,o,n,a;try{if(g&&(e||4===m.readyState))if(g=s,e)4!==m.readyState&&m.abort();else{i=m.status,n=m.getAllResponseHeaders();try{a=m.responseText}catch(t){}try{o=m.statusText}catch(r){o=""}}}catch(d){e||l(-1,d)}a&&l(i,o,a,n)},void(4===m.readyState?g():m.onreadystatechange=g)}}"GET"!=t&&(o._method="POST");var y="cb_"+Math.round(1e6*Math.random());A[y]=function(t){switch(t.code){case 0:n&&n(t);break;default:a&&a(t),$.error("出错啦("+t.code+"): "+t.errorMessage),t.errorTrace&&$.error(t.errorTrace)}},o.callback="DUOSHUO.API['"+y+"']",r.injectScript(i()+"/api/"+e+".jsonp?"+r.param(o))},get:function(t,e,s,i){return this.ajax("GET",t,e,s,i)},post:function(t,e,s,i){return this.ajax("POST",t,e,s,i)}},R=S.ws={messages:[],send:function(s){if(!("WebSocket"in t&&h))return!1;var i=this;if(i.messages.push(h.stringify(s)),!i.webSocket){var n="https:"===e.location.protocol?"wss://ws.duoshuo.com:8202/":"ws://ws.duoshuo.com:8201/",a=i.webSocket=new WebSocket(n);a.onopen=function(){var t,e=1===a.readyState;if(e)for(;t=i.messages.shift();)a.send(t)},a.onmessage=function(t){try{var e=h.parse(t.data)}catch(s){return}switch(e.type){case"post":for(var i,n=0;n<S.pagelets.length;n++)i=S.pagelets[n],i.threadId==e.thread_id&&i.onMessage(e);break;case"notification":y.push(e),o()}},t.addEventListener("beforeunload",function(){a.close()})}i.webSocket.onopen()}};S.DOMAIN="duoshuo.com",S.STATIC_URL=g+"//static.duoshuo.com",S.REMOTE=g+"//duoshuo.com",S.version="16.2.16";var P={"default":"1ebcb660",dark:"b9ab6243",bluebox:"17249850",newhua:"176e2fae",justflat:"2ea405f8"},L={"embed.compat":"24f8ca3f",smilies:"921e8eda"},U={post:"Send",posting:"Sending",settings:"Settings",reply:"Reply",like:"Like",repost:"Repost to...",report:"Report","delete":"Delete",reply_to:"Reply to",reposts:"Reposts",comments:"Comments",floor:" ",latest:"Latest",earliest:"Earliest",hottest:"Hottest",share_to:"Share on",leave_a_message:"Leave a message...",no_comments_yet:"No comments yet, why not be the first to leave a comment?",repost_reason:"Share your feelings",hot_posts_title:"Most liked comments",comments_zero:"No comments yet",comments_one:"1 comment",comments_multiple:"{num} comments",reposts_zero:"No reposts yet",reposts_one:"1条转发",reposts_multiple:"{num}条转发",weibo_reposts_zero:"暂无新浪微博",weibo_reposts_one:"1条新浪微博",weibo_reposts_multiple:"{num}条新浪微博",qqt_reposts_zero:"暂无腾讯微博",qqt_reposts_one:"1条腾讯微博",qqt_reposts_multiple:"{num}条腾讯微博"},W={get:function(t){return m?m[t]:void 0},save:function(t,e){if(m)try{m.removeItem(t),m[t]=h.stringify(e),m.removeItem(t+":timestamp"),m[t+":timestamp"]=Math.floor((new Date-b)/1e3)}catch(s){}}},M=S.loadRequire=function(e){if(e.visitor&&(!at.data&&e.visitor.user_id&&t.Notification&&R.send({logged_user_id:e.visitor.user_id}),at.reset(e.visitor)),e.site&&(nt.reset(e.site),W.save("ds_site_"+c.short_name,e.site)),!S.theme&&nt.data.theme&&a(nt.data.theme),e.lang&&(r.extend(U,e.lang),W.save("ds_lang_"+c.short_name,e.lang)),e.stylesheets)for(var s=0;s<e.stylesheets.length;s++)r.injectStylesheet(e.stylesheets[s]);if(e.nonce&&(S.nonce=e.nonce),e.style&&r.injectStyle((e.style||"")+S.compileStyle(c.component_style)),e.unread&&rt.reset(e.unread),e.warnings)for(var s=0;s<e.warnings.length;s++)$.warn(e.warnings[s])},z=0,H=S.Class=function(){};H.extend=function(t){function e(){!z&&this.init&&this.init.apply(this,arguments)}z=1;var s=new this;z=0;for(var i in t)s[i]=t[i];return e.prototype=s,e.prototype.constructor=e,e.extend=arguments.callee,e};var B=S.Event=H.extend({on:function(t,e){var i=this.handlers||(this.handlers={});return i[t]===s&&(i[t]=[]),i[t].push(e),this},trigger:function(t,e){var s=(this.handlers||(this.handlers={}))[t];if(s)for(var i=0;i<s.length&&s[i].call(this,e)!==!1;i++);return this}}),F=S.Widget=B.extend({init:function(t,e){this.el=t,this.options=e||{},this.render()},render:function(){},reset:function(){},load:function(t){switch(t.code){case 0:M(t);var e=this.prepare(t);e.options=r.extend(this.options,t.options),this.onload(e);break;default:this.onError(t)}},onload:function(t){this.el.html(tt[this.tmpl](t))},prepare:function(t){return t},onMessage:function(){},onError:function(t){$.error("出错啦("+t.code+"): "+t.errorMessage),t.errorTrace&&$.error(t.errorTrace)}}),J=S.Model=B.extend({init:function(t){this.data=t},reset:function(t){this.data=t,this.trigger("reset")},remove:function(t){this.data.splice(t,1),this.trigger("reset")},set:function(t,e){if(e===s)for(var i in t)this.data[i]=t[i];else this.data[t]=e;return this.trigger("reset"),this},toJSON:function(){return r.extend({},this.data)}}),V=J.extend({toJSON:function(){return r.extend({},this.data)}}),Q=J.extend({toJSON:function(){var t=r.extend({},this.data);return t.theAuthor=ct[this.data.author_id]&&ct[this.data.author_id].data||this.data.author,t.parents=this.data.parents||[],t}}),Y=J.extend({toJSON:function(){return r.extend({},this.data)}}),G=function(t){this.model=t};G.prototype.set=function(t){for(var e in t)t[e]&&(this[e]?this[e].set(t[e]):this[e]=new this.model(t[e]))},G.prototype.get=function(t){for(var e=0,s=[];e<t.length;e++)s[e]=this[t[e]];return s},G.prototype.getJSON=function(t){for(var e=0,s=[];e<t.length;e++)this[t[e]]&&s.push(this[t[e]].toJSON());return s};var K={userUrl:function(t){return t.url},avatarUrl:function(t){return t.avatar_url||nt.data.default_avatar_url},loginUrl:function(t,e){return e||(e={}),c.sso&&c.sso.login&&(e.sso=1,e.redirect_uri=c.sso.login),i()+"/login/"+t+"/"+_(e)},bindUrl:function(t){return i()+"/bind/"+t+"/"+_(c.sso&&c.sso.login?{sso:1,redirect_uri:c.sso.login}:null,k())},logoutUrl:function(){return i()+"/logout/"+_(c.sso&&c.sso.logout?{sso:1,redirect_uri:c.sso.logout}:null)}},Z=["weixin","weibo","qq","google"],X=[],tt=S.templates={userAnchor:function(t){return t.url?'<a rel="nofollow author" target="_blank" href="'+w(t.url)+'">'+w(t.name)+"</a>":w(t.name)},avatarImg:function(t,e){return'<img src="'+w(K.avatarUrl(t,e))+'" alt="'+w(t.name)+'"'+(e?' style="width:'+e+"px;height:"+e+'px"':"")+"/>"},avatar:function(t,e){var s=tt.avatarImg(t,e),o=K.userUrl(t);return o?'<a rel="nofollow author" target="_blank" href="'+w(o)+'" '+(t.user_id?" onclick=\"this.href='"+i()+"/user-url/?user_id="+t.user_id+"';\"":"")+' title="'+w(t.name)+'">'+s+"</a>":s},timeText:function(t){return t?'<span class="ds-time" datetime="'+t+'" title="'+S.fullTime(t)+'">'+S.elapsedTime(t)+"</span>":""},timeAnchor:function(t,e){return t?'<a href="'+e+'" target="_blank" rel="nofollow" class="ds-time" datetime="'+t+'" title="'+S.fullTime(t)+'">'+S.elapsedTime(t)+"</a>":""},serviceIcon:function(t,e){return'<a href="javascript:void(0)" class="ds-service-icon'+(e?"-grey":"")+" ds-"+t+'" data-service="'+t+'" title="'+S.sourceName[t]+'"></a>'},poweredBy:function(t){return'<p class="ds-powered-by"><a href="http://duoshuo.com" target="_blank" rel="nofollow">Powered by Duoshuo（多说）</a></p>'},indicator:T('<div id="ds-indicator"></div>'),waitingImg:T('<div id="ds-waiting"></div>'),loginItem:function(t,e){var s=K[e?"bindUrl":"loginUrl"](t);return'<li>    <a href="'+s+'" rel="nofollow" class="ds-service-link ds-'+t+'">'+S.serviceNames[t]+(at.data.social_uid[t]?' <span class="ds-icon ds-icon-ok"></span>':"")+"</a></li>"}},et=function(t){var e=[];for(var s in t)e.push('<input type="hidden" name="'+s+'" value="'+w(t[s])+'" />');return e.join("\n")};tt.commentList=function(t){var e="",s=t.list;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<li class="ds-comment',t.options.show_avatars&&(e+=" ds-show-avatars"),e+='" data-post-id="'+i.post_id+'">',t.options.show_avatars&&(e+='<div class="ds-avatar">'+tt.avatar(i.theAuthor,t.options.avatar_size)+"</div>"),e+='<div class="ds-meta">'+tt.userAnchor(i.theAuthor),t.options.show_time&&(e+=tt.timeText(i.created_at)),e+="</div>",e+=t.options.show_title?'<div class="ds-thread-title">在 <a href="'+u(i.thread.url)+'#comments">'+u(i.thread.title)+'</a> 中评论</div><div class="ds-excerpt">'+i.message+"</div>":'<a class="ds-excerpt" title="'+i.thread.title+' 中的评论" href="'+u(i.thread.url)+'#comments">'+i.message+"</a>",e+="</li>";return e},tt.ctxPost=function(t){var e="";return t.post&&(e+='<li class="ds-ctx-entry"',t.hidden&&(e+=' style="display:none"'),e+=' data-post-id="'+t.post.post_id+'"><div class="ds-avatar">'+tt.avatar(t.post.theAuthor||t.post.author)+'</div><div class="ds-ctx-body"><div class="ds-ctx-head">'+tt.userAnchor(t.post.theAuthor||t.post.author)+tt.timeAnchor(t.post.created_at,t.post.url),t.index>=0&&(e+='<div class="ds-ctx-nth" title="'+S.fullTime(t.post.created_at)+'">'+(t.index+1)+U.floor+"</div>"),e+='</div><div class="ds-ctx-content">'+t.post.message,t.index>=0&&(e+='　　　　　　　<div class="ds-comment-actions',t.post.vote>0&&(e+=" ds-post-liked"),e+='">'+tt.likePost(t.post)+'<a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>'+U.repost+'</a><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>'+U.reply+"</a></div>"),e+="</div></div></li>"),e},tt["dialog-anonymous"]=function(t){var e='<h2>Login using</h2><div class="ds-icons-32">',s=t.services;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<a class="ds-'+i+'" href="'+K.loginUrl(i)+'">'+S.sourceName[i]+"</a>";return e+="</div>",t.options.deny_anonymous||(e+='<h2>Or leave a comment as a guest</h2><form><div class="ds-control-group"><input type="text" name="author_name" id="ds-dialog-name" value="'+u(at.data.name)+'" placeholder="Nickname (required)" required /></div>',t.options.require_guest_email&&(e+='<div class="ds-control-group"><input type="email" name="author_email" id="ds-dialog-email" value="'+u(at.data.email)+'" placeholder="Email (required)" required /></div>'),t.options.require_guest_url&&(e+='<div class="ds-control-group"><input type="url" name="author_url" id="ds-dialog-url" placeholder="your website (optional)" value="'+u(at.data.url)+'" /></div>'),e+='<button type="submit">Send</button></form>'),e},tt["dialog-ask-for-auth"]=function(){var t='<h2>Login using</h2><ul class="ds-service-list">'+tt.serviceList(Z)+'</ul><ul class="ds-service-list ds-additional-services">'+tt.serviceList(X)+"</ul>";return t},tt["dialog-bind-more"]=function(){var t='<h2>Bind more account</h2><ul class="ds-service-list">'+tt.serviceBindList(Z)+'</ul><ul class="ds-service-list ds-additional-services">'+tt.serviceBindList(X)+'</ul><div style="clear:both"></div>';return t},tt["dialog-qrcode"]=function(t){var e='<h2>Share the QR Code on Wechat</h2><div class="ds-share-qrcode" style="text-align:center;"><img src="'+t.qrcode_url+'" alt="qrcode"></div>';return e},tt["dialog-reposts"]=function(t){var e='<h2>Repost to Weibo</h2><div class="ds-quote"><strong>@'+u(t.post.theAuthor.name)+"</strong>: "+t.post.message+"</div><form>"+et({post_id:t.post.post_id})+'<div class="ds-textarea-wrapper"><textarea name="message" title="Ctrl+Enter to submit" placeholder="'+u(U.repost_reason)+'">'+u(t.repostMessage)+'</textarea><pre class="ds-hidden-text"></pre>';return e+='</div><div class="ds-actions">',t.service?e+=et({"service[]":t.service}):(e+='<label><input type="checkbox" name="service[]" value="weibo"',at.data.social_uid.weibo&&(e+=' checked="checked"'),e+=' /><span class="ds-service-icon ds-weibo"></span> Sina Weibo</label><label><input type="checkbox" name="service[]" value="qqt"',at.data.social_uid.qq&&(e+=' checked="checked"'),e+=' /><span class="ds-service-icon ds-qqt"></span> Tencent Weibo</label>'),e+='<button type="submit">Repost</button></div></form>'},tt.dialog=function(t){var e='<div class="ds-dialog"><div class="ds-dialog-inner ds-rounded"><div class="ds-dialog-body">'+t+'</div><div class="ds-dialog-footer"><a href="http://duoshuo.com/" target="_blank" class="ds-logo"></a><span>Comment box</span></div><a class="ds-dialog-close" href="javascript:void(0)" title="关闭"></a></div></div>';return e},tt.hotPosts=function(t){var e='<div class="ds-header ds-gradient-bg">'+u(U.hot_posts_title)+"</div><ul>",s=t.list;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+=tt.post({post:i,options:t.options});return e+="</ul>"},tt.likePost=function(t){var e='<a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>'+U.like;return t.likes>0&&(e+="("+t.likes+")"),e+="</a>"},tt.likeTooltip=function(t){var e='<div class="ds-like-tooltip ds-rounded"><p>Thanks for your like!<br />I guess you might<br />want to share it on</p><ul>';for(var s in t.services)e+='<li><a class="ds-share-to-'+s+" ds-service-link ds-"+s+'" href="'+i()+"/share-proxy/?"+r.param({service:s,thread_id:t.thread_id})+'">'+t.services[s]+"</a></li>";return e+='</ul><p class="ds-like-tooltip-footer"><a class="ds-like-tooltip-close">Skip</a></p></div>'},tt.loginButtons=function(){var t='<div class="ds-login-buttons"><p>Login using </p><div class="ds-social-links"><ul class="ds-service-list">'+tt.serviceList(Z)+"</ul></div></div>";return t},tt.loginWidget=function(t){var e='<div class="ds-icons-32">',s=t;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<a class="ds-'+i+'" href="'+K.loginUrl(i)+'">'+S.sourceName[i]+"</a>";return e+="</div>"},tt.meta=function(t){var e='<div class="ds-meta"><a href="javascript:void(0)" class="ds-like-thread-button ds-rounded';return t.user_vote>0&&(e+=" ds-thread-liked"),e+='"><span class="ds-icon ds-icon-heart"></span> <span class="ds-thread-like-text">',e+=t.user_vote>0?"Liked":"Like",e+='</span><span class="ds-thread-cancel-like">Cancel Like</span></a><span class="ds-like-panel"></span></div>'},tt.notify=function(t){var e='<div id="ds-reset"><a class="ds-logo" href="http://duoshuo.com/" target="_blank" title="多说"></a><ul class="ds-notify-unread"><li';return t.comments||(e+=' style="display:none;"'),e+='><a data-type="unread-comments" href="javascript:void(0);">You\'ve got'+t.comments+"new"+(1==parseInt(t.comments)?" reply":" replies")+"</a></li><li",t.notifications||(e+=' style="display:none;"'),e+='><a data-type="unread-notifications" href="javascript:void(0);">你有'+t.notifications+"条系统消息</a></li></ul></div>"},tt.post=function(t){var e="",s=t.post,o=t.options,n=s.author;if(e+='<li class="ds-post" data-post-id="'+s.post_id+'"><div class="ds-post-self" data-post-id="'+s.post_id+'" data-thread-id="'+s.thread_id+'" data-root-id="'+s.root_id+'" data-source="'+s.source+'"><div class="ds-avatar"',n.user_id&&(e+=' data-user-id="'+n.user_id+'"'),e+=">"+tt.avatar(n),S.sourceName[s.source]&&(e+=tt.serviceIcon(s.source)),e+='</div><div class="ds-comment-body"><div class="ds-comment-header">',n.url?(e+='<a class="ds-user-name ds-highlight" data-qqt-account="'+(n.qqt_account||"")+'" href="'+u(n.url)+'" ',n.user_id&&(e+=" onclick=\"this.href='"+i()+"/user-url/?user_id="+n.user_id+"';\""),e+=' rel="nofollow" target="_blank"',n.user_id&&(e+=' data-user-id="'+n.user_id+'"'),e+=">"+u(n.name)+"</a>"):(e+='<span class="ds-user-name"',n.user_id&&(e+=' data-user-id="'+n.user_id+'"'),e+=' data-qqt-account="'+(n.qqt_account||"")+'">'+u(n.name)+"</span>"),e+="</div>",1==o.max_depth&&o.show_context&&s.parents.length){e+='<ol id="ds-ctx">';var a=lt.getJSON(s.parents);if(a)for(var r,d=-1,l=a.length-1;l>d;)r=a[d+=1],1==d&&s.parents.length>2&&(e+='<li class="ds-ctx-entry"><a href="javascript:void(0);" class="ds-expand">'+(s.parents.length-2)+" more comments</a></li>"),e+=tt.ctxPost({post:r,index:d,hidden:d&&d<s.parents.length-1});e+="</ol>"}if(e+="<p>",s.parents.length>=o.max_depth&&(!o.show_context||o.max_depth>1)&&s.parent_id&&lt[s.parent_id]&&(e+='<a class="ds-comment-context" data-post-id="'+s.post_id+'" data-parent-id="'+s.parent_id+'">'+U.reply_to+u(lt[s.parent_id].toJSON().author.name)+": </a>"),e+=s.message+'</p><div class="ds-comment-footer ds-comment-actions',s.vote>0&&(e+=" ds-post-liked"),e+='">',e+=s.url?tt.timeAnchor(s.created_at,s.url):tt.timeText(s.created_at),"duoshuo"==s.source?(e+='<a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>'+U.reply+"</a>"+tt.likePost(s)+'<a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>'+U.repost+'</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>'+U.report+"</a>",s.privileges["delete"]&&(e+='<a class="ds-post-delete" href="javascript:void(0);"><span class="ds-icon ds-icon-delete"></span>'+U["delete"]+"</a>")):("qqt"==s.source||"weibo"==s.source)&&(e+='<a class="ds-weibo-comments" href="javascript:void(0);">'+U.comments,s.type.match(/\-comment$/)||(e+='(<span class="ds-count">'+s.comments+"</span>)"),e+='</a><a class="ds-weibo-reposts" href="javascript:void(0);">'+U.reposts,s.type.match(/\-comment$/)||(e+='(<span class="ds-count">'+s.reposts+"</span>)"),e+="</a>"),e+="</div></div></div>",o.max_depth>1&&(s.childrenArray||s.children)&&"weibo"!=s.source&&"qqt"!=s.source){e+='<ul class="ds-children">';var c=lt.getJSON(s.childrenArray||s.children);if(c)for(var s,d=-1,h=c.length-1;h>d;)s=c[d+=1],e+=tt.post({post:s,options:o});e+="</ul>"}return e+="</li>"},tt.postListHead=function(t){var e='<div class="ds-comments-info"><div class="ds-sort"><a class="ds-order-desc">'+U.latest+'</a><a class="ds-order-asc">'+U.earliest+'</a><a class="ds-order-hot">'+U.hottest+'</a></div><ul class="ds-comments-tabs"><li class="ds-tab"><a class="ds-comments-tab-duoshuo ds-current" href="javascript:void(0);"></a></li>';return t.options.show_reposts&&t.thread.reposts&&(e+='<li class="ds-tab"><a class="ds-comments-tab-repost" href="javascript:void(0);"></a></li>'),e+=" ",t.options.show_weibo&&t.thread.weibo_reposts&&(e+='<li class="ds-tab"><a class="ds-comments-tab-weibo" href="javascript:void(0);"></a></li>'),e+=" ",t.options.show_qqt&&t.thread.qqt_reposts&&(e+='<li class="ds-tab"><a class="ds-comments-tab-qqt" href="javascript:void(0);"></a></li>'),e+="</ul></div>"},tt.recentVisitors=function(t){var e="",s=t.response;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<div class="ds-avatar">'+tt.avatar(i,t.options.avatar_size)+"</div>";return e},tt["related-read"]=function(t){var e="";if(t&&t.length){e+='<article class="ds-reads-expand"><header>Recommended</header><section> ';var s=t;if(s)for(var i,o=-1,n=s.length-1;n>o;){if(i=s[o+=1],e+=' <a href="'+i.url+'" class="ds-reads-item"> ',3==i.imgs.length){e+=" <h2>"+i.title+'</h2> <div class="ds-reads-pics"> <ul> ';var a=i.imgs;if(a)for(var r,d=-1,l=a.length-1;l>d;)r=a[d+=1],e+=' <li> <div class="ds-reads-dumb"></div> <div class="ds-reads-pic-wrap" style="background-image:url('+r+');"></div> </li> ';e+=' </ul> </div> <div class="ds-reads-info"> ',1==i.type&&(e+=' <span class="ds-reads-app-special">打开头条阅读</span> '),e+=' <span class="ds-reads-date" data-date="'+i.timeStamp+'"></span> </div> '}else e+=' <div class="ds-reads-desc ',i.imgs.length||(e+="ds-reads-only"),e+='"> <div class="ds-reads-title">'+i.title+'</div> <div class="ds-reads-info"> ',1==i.type&&(e+=' <span class="ds-reads-app-special">打开头条阅读</span> '),e+=' <span class="ds-reads-date" data-date="'+i.timeStamp+'"></span> </div> </div> ',i.imgs.length&&(e+=' <div class="ds-reads-pic-right"> <div class="ds-reads-dumb"></div> <div class="ds-reads-pic-wrap" style="background-image:url('+i.imgs[0]+');"> ',i.hasVideo&&(e+=' <div class="ds-reads-vid-info"><span>'+i.videoDuration+"</span></div> "),e+=" </div> </div> "),e+=" ";e+=" </a> "}e+="</section></article>"}return e},tt.replybox=function(t){var e='<div class="ds-replybox"><a class="ds-avatar"';return e+=n()?' href="javascript:;" onclick="return false"':' href="'+S.REMOTE+"/settings/avatar/"+_(k())+'" target="_blank" title="set your avatar"',e+=">"+tt.avatarImg(at.data)+'</a><form method="post">'+et(t.params)+'<div class="ds-textarea-wrapper ds-rounded-top"><textarea name="message" title="Ctrl + Enter to submit" placeholder="'+u(U.leave_a_message)+'"></textarea><pre class="ds-hidden-text"></pre>',e+="</div>",e+='<div class="ds-post-toolbar"><div class="ds-post-options ds-gradient-bg">',!n()&&at.data.repostOptions,e+="</div>",e+='<button class="ds-post-button" type="submit">'+u(U.post)+'</button><div class="ds-toolbar-buttons">',t.options.use_smilies&&(e+='<a class="ds-toolbar-button ds-add-emote" title="Insert stickers"></a>'),t.options.use_images&&t.options.parse_html_enabled&&(e+='<a class="ds-toolbar-button ds-add-image" title="Insert images"></a>'),e+="</div></div>",e+="</form></div>"},tt.serviceBindList=function(t){var e="",s=t;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<li><a href="'+K.bindUrl(i)+'" rel="nofollow" class="ds-service-link ds-'+i+'">'+S.serviceNames[i],at.data.social_uid[i]&&(e+=' <span class="ds-icon ds-icon-ok"></span>'),e+="</a></li>";return e},tt.serviceList=function(t){var e="",s=t;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<li><a href="'+K.loginUrl(i)+'" rel="nofollow" class="ds-service-link ds-'+i+'">'+S.serviceNames[i]+"</a></li>";return e},tt.shareWidget=function(t){var e='<div class="ds-share-icons"> <div class="ds-share-icons-inner"> <ul class="ds-share-icons-16"> ',s=t.services;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+=' <li> <a class="ds-'+i+'" href="javascript:;" data-service="'+i+'">'+S.sourceName[i]+"</a> </li> ";return e+=' </ul> </div> <div class="ds-share-icons-footer">'+t.copyright+"</div></div>"},tt.smiliesTooltip=function(t){var e='<div id="ds-smilies-tooltip"><ul class="ds-smilies-tabs">';for(var s in t)e+="<li><a>"+s+"</a></li>";return e+='</ul><div class="ds-smilies-container"></div></div>'},tt.toolbar=function(){var t='<div class="ds-toolbar"><div class="ds-account-control"><span class="ds-icon ds-icon-settings"></span> <span>Account</span><ul><li><a class="ds-bind-more" href="javascript:void(0);" style="border-top: none">Bind More</a></li><li><a target="_blank" href="'+S.REMOTE+"/settings/"+_(k())+'">Settings</a></li><li><a rel="nofollow" href="'+K.logoutUrl()+'" style="border-bottom: none">Logout</a></li></ul></div><div class="ds-visitor">';return t+=at.data.url?'<a class="ds-visitor-name" href="'+u(at.data.url)+'" target="_blank">'+u(at.data.name)+"</a>":'<span class="ds-visitor-name">'+u(at.data.name)+"</span>",t+='<a class="ds-unread-comments-count" href="javascript:;" title="Unread replies"></a></div></div>'},tt.topThreads=function(t){var e="",s=t.response;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<li><a target="_blank" href="'+u(i.url)+'" title="'+u(i.title)+'">'+u(i.title)+"</a></li>";return e},tt.topUsers=function(t){var e="",s=t.response;if(s)for(var i,o=-1,n=s.length-1;n>o;)i=s[o+=1],e+='<div class="ds-avatar">'+tt.avatar(i,t.options.avatar_size)+"<h4>"+u(i.name)+"</h4></div>";return e},tt.userInfo=function(t){var e='<a href="'+u(t.url)+'" onclick="this.href=\''+i()+"/user-url/?user_id="+t.user_id+'\';" class="ds-avatar" target="_blank">'+tt.avatarImg(t)+'</a><a href="'+u(t.url)+'" onclick="this.href=\''+i()+"/user-url/?user_id="+t.user_id+'\';" class="ds-user-name ds-highlight" target="_blank">'+u(t.name)+"</a>";for(var s in t.social_uid)e+='<a href="'+S.REMOTE+"/user-proxy/"+s+"/"+t.social_uid[s]+'/" target="_blank" class="ds-service-icon ds-'+s+'" title="'+S.sourceName[s]+'"></a>';return e+='<p class="ds-user-card-meta"><a href="'+S.REMOTE+"/profile/"+t.user_id+'/" target="_blank"><span class="ds-highlight">'+t.comments+"</span>"+(1==parseInt(t.comments)?" comment":" comments")+"</a></p>",t.description&&(e+='<p class="ds-user-description">'+u(t.description)+"</p>"),e};var st=S.Views={},it=(S.Callbacks={},S.pagelets=[]),ot=S.events=new B,nt=S.site=new J,at=S.visitor=new V,rt=S.unread=new J,dt=S.threadPool=new G(Y),lt=S.postPool=new G(Q),ct=S.userPool=new G(V);ot.on("queryDefined",function(){var t=c.short_name;if(c.theme&&a(c.theme),m){var e=m["ds_site_"+t],s=m["ds_lang_"+t];e&&nt.reset(h.parse(e)),s&&r.extend(U,h.parse(s))}}),C(),S.require("embed.compat",function(){function o(t){t.stopPropagation();
}function a(t){(t.ctrlKey&&13==t.which||10==t.which)&&H(this.form).trigger("submit")}function d(){var t=H(this);t.height(Math.max(54,t.next(".ds-hidden-text").text(this.value).height()+27))}function l(){if(I.authInWin){var t=this.href.match(/\/(login|bind)\/(\w+)\//i);if(t&&S.serviceNames[t[2]])return!b(t[2],this.href)}}function u(){var t,s,i,o,n,a=this,r=0,d=0;e.selection&&(s=e.selection.createRange(),s&&s.parentElement()==a&&(o=a.value.length,t=a.value.replace(/\r\n/g,"\n"),i=a.createTextRange(),i.moveToBookmark(s.getBookmark()),n=a.createTextRange(),n.collapse(!1),i.compareEndPoints("StartToEnd",n)>-1?r=d=o:(r=-i.moveStart("character",-o),r+=t.slice(0,r).split("\n").length-1,i.compareEndPoints("EndToEnd",n)>-1?d=o:(d=-i.moveEnd("character",-o),d+=t.slice(0,d).split("\n").length-1)))),H(a).data("ds-range-start",r).data("ds-range-end",d)}function h(t){return I.touch&&t.addClass("ds-touch"),r.cssProperty("transition")||t.addClass("ds-no-transition"),I.ie6&&t.addClass("ds-ie6"),I.opacity||t.addClass("ds-no-opacity"),t}function f(t){if(!I.placeholder){var e=t.attr("placeholder");t.val(e).focus(function(){this.value===e&&(this.value="")}).blur(function(){""===this.value&&(this.value=e)})}return t}function g(t){if("http://duoshuo.com"===t.origin)switch(t.data.type){case"login":p.href=t.data.redirectUrl}}function b(e,s){var i={weibo:[760,600],renren:[420,322],qq:[504,445],weixin:[450,550],google:[600,440]}[e]||[550,400];return t.open(s+(-1==s.indexOf("?")?"?":"&")+r.param({origin:p.origin||"http://"+p.host}),"_blank","width="+i[0]+",height="+i[1]+",toolbar=no,menubar=no,location=yes")}function y(t){var e=K[n()?"loginUrl":"bindUrl"](t);I.authInWin&&b(t,e)||(p.href=e)}function T(){var t=N(tt["dialog-ask-for-auth"]({})).el.find(".ds-dialog").css("width","300px");t.find("a.ds-service-link").click(l)}function _(t,e,s,i){function o(){function t(t){if(s&&i){var e=s.options,o=P(s.postList.el,t.response[i],e);"asc"==e.order==("top"==e.formPosition)&&S.scrollTo(o);var n=s.el.find(".ds-comments-tab-"+i+" span.ds-highlight");n.html(parseInt(n.html())+1)}}return i||l.find("[type=checkbox]:checked")[0]?(A.post("posts/repost",S.toJSON(l),t),r.close(),!1):(alert("Where would you like to share this post on?"),!1)}function n(){var t=this.value;return this.checked&&!at.data.social_uid["qqt"==t?"qq":t]?void y(t):void 0}var r=N(tt["dialog-reposts"]({post:t.toJSON(),repostMessage:e,service:i})),l=r.el.find("form");return l.submit(o),l.find(".ds-actions [type=checkbox]").change(n),f(l.find("textarea")).keyup(a).keyup(d).focus(),!1}function k(t){var e={"unread-comments":{title:"Unread messages and comments",apiUrl:"users/unreadComments",tmpl:function(t){return t.thread?'<li data-thread-id="'+t.thread.thread_id+'">'+H.map(t.authors,tt.userAnchor).join("、")+' replied to you at <a class="ds-read" href="'+t.thread.url+'#comments" target="_blank">'+w(t.thread.title||"untitled")+'</a><a class="ds-delete ds-read" title="Got it" href="javascript:void(0)">Got it!</a></li>':""},read:function(t){var e=t.attr("data-thread-id");A.post("threads/read",{thread_id:e}),rt.data.comments--}},"unread-notifications":{title:"System Notifications",apiUrl:"users/unreadNotifications",tmpl:function(t){return'<li data-notification-id="'+t.notification_id+'" data-notification-type="'+t.type+'">'+t.content+' <a class="ds-delete ds-read" title="知道了" href="javascript:void(0)">知道了</a></li>'},read:function(t){var e=t.attr("data-notification-id");A.post("notifications/read",{notification_id:e}),rt.data.notifications--}}}[t],s=N("<h2>"+e.title+'</h2><ul class="ds-unread-list"></ul>');s.on("close",S.resetNotify);var i=s.el.find(".ds-unread-list").delegate(".ds-delete","click",function(){return H(this).parent().remove(),0===i.children().length&&s.close(),!1}).delegate(".ds-read","click",function(){e.read(H(this).parent())});H("#ds-notify").hide(),A.get(e.apiUrl,{},function(t){s.el.find(".ds-unread-list").html(H.map(t.response,e.tmpl).join("\n"))})}function q(){bubbleOutTimer&&(clearTimeout(bubbleOutTimer),bubbleOutTimer=0)}function D(){bubbleOutTimer=setTimeout(function(){bubbleOutTimer=0,Z.detach()},400)}function P(t,e,s){return t.find(".ds-post[data-post-id="+e.data.post_id+"]")[0]?void 0:(t.find(".ds-post-placeholder").remove(),H(tt.post({post:e.toJSON(),options:s})).hide()["asc"==s.order?"appendTo":"prependTo"](t).slideDown(function(){}))}function L(t,e){function s(){if(n())return T(),!1;var t=H(this).parent(),e=t.hasClass("ds-post-liked"),s=H(this).html().match(/\((\d+)\)/),i=(s?parseInt(s[1]):0)+(e?-1:1);return A.post("posts/vote",{post_id:t.closest(".ds-ctx-entry, .ds-post-self").attr("data-post-id"),vote:e?0:1}),H(this).html(H(this).html().replace(/\(\d+\)/,"")+(i?"("+i+")":"")),t[e?"removeClass":"addClass"]("ds-post-liked"),!1}function i(){var t=H(this).closest(".ds-post-self"),e=lt[t.attr("data-post-id")];return _(e,""),!1}function o(){if(!confirm("Do you really want to delete this comment?"))return!1;var e=H(this).closest(".ds-post-self");return A.post("posts/remove",{post_id:e.attr("data-post-id")}),e.parent().fadeOut(200,function(){t.data.comments--,t.updateCounter("duoshuo"),H(this).remove()}),!1}function a(){if(!confirm("Are you sure you want to report this comment?"))return!1;var t=H(this).closest(".ds-post-self");return A.post("posts/report",{post_id:t.attr("data-post-id")}),alert("We appreciate your feedback"),!1}function r(){var s=H(this),i=s.closest(".ds-comment-actions");if(i.hasClass("ds-reply-active"))p.el.fadeOut(200,function(){H(this).detach()}),i.removeClass("ds-reply-active");else{var o=s.closest(".ds-ctx-entry, .ds-post-self");p?p.actionsBar.removeClass("ds-reply-active"):(p=new st.Replybox(t),p.render(!0).el.addClass("ds-inline-replybox").detach()),p.el.find("[name=parent_id]").val(o.attr("data-post-id")),p.el.show().appendTo(s.closest(".ds-ctx-body, .ds-comment-body")).find("textarea").focus(),p.actionsBar=i.addClass("ds-reply-active"),e.max_depth<=1?p.postList=t.postList.el:(p.postList=o.siblings(".ds-children"),p.postList[0]||(p.postList=H('<ul class="ds-children"></ul>').insertAfter(o)))}return!1}function d(){function t(t){M(t),o.append(H.map(t.response,function(t){return tt.post({post:t,options:e})}).join(""))}var s=H(this).closest(".ds-post-self"),i=s.attr("data-post-id");if(s.data("source"),0!=s.attr("data-root-id"))return!1;var o=s.siblings(".ds-children");return o[0]?(o.remove(),!1):(o=H('<ul class="ds-children"></ul>').insertAfter(s),A.get("posts/listComments",z({post_id:i}),t),!1)}function l(){var e=H(this).closest(".ds-post-self"),s=lt[e.attr("data-post-id")],i=s.data.source;if(!at.data.social_uid["qqt"==i?"qq":i])return void y(i);var o=s.data.root_id,n="0"!=o?lt[o]:s,a="";if("0"!=o){var r=prepatePost(s.data).theAuthor;a=("weibo"==i?"//@"+r.name:"|| @"+r.qqt_account)+":"+s.data.message}return _(n,a,t,i),!1}function c(){var t=H(this).parent();return t.siblings().show(),t.remove(),!1}function u(){function e(){function e(t){var e=t.response;ct[c]?ct[c].set(e):ct[c]=new V(e),Z.owner==s&&X.html(tt.userInfo(e))}et=0,Z.owner=s,q();var o=i.offset(),n=t.el.offset(),a=i.innerWidth()/2,r=t.el.innerHeight()-(o.top-n.top)+6,d=o.left-n.left-35+(a>35?35:a);try{if(i.hasClass("ds-comment-context"))X.attr("id","ds-ctx-bubble").attr("data-post-id",i.attr("data-post-id")).html('<ul id="ds-ctx">'+tt.ctxPost({post:lt[i.attr("data-parent-id")].toJSON()})+'</ul><div class="ds-bubble-footer"><a class="ds-ctx-open" href="javascript:void(0);">查看对话</a></div>');else if(i.hasClass("ds-avatar")||i.hasClass("ds-user-name")){var l={},c=l.user_id=i.attr("data-user-id");if(!c)throw"no info";X.attr("id","ds-user-card").attr("data-user-id",c).empty(),ct[c]?X.html(tt.userInfo(ct[c].data)):A.get("users/profile",z(l),e)}Z.css({bottom:r,left:d}).appendTo(t.innerEl)}catch(u){Z.detach()}}var s=this;if(bubbleOutTimer&&Z.owner==s)return clearTimeout(bubbleOutTimer),void(bubbleOutTimer=0);var i=H(s);et=setTimeout(e,200)}function h(){et?(clearTimeout(et),et=0):bubbleOutTimer||D()}var p;this.delegate("a.ds-post-likes","click",s).delegate("a.ds-post-repost","click",i).delegate("a.ds-post-delete","click",o).delegate("a.ds-post-report","click",a).delegate("a.ds-post-reply","click",r).delegate("a.ds-weibo-comments","click",d).delegate("a.ds-weibo-reposts","click",l).delegate("a.ds-expand","click",c),I.touch||this.delegate("a.ds-comment-context, .ds-avatar, .ds-user-name","mouseenter",u).delegate("a.ds-comment-context, .ds-avatar, .ds-user-name","mouseleave",h)}function z(t){var s={require:"site,visitor,nonce,lang"+(ot++?"":",unread,log,extraCss"),site_ims:W.get("ds_site_"+c.short_name+":timestamp"),lang_ims:W.get("ds_lang_"+c.short_name+":timestamp"),referer:e.referrer};c.stylePatch&&(s.style_patch=c.stylePatch);for(var i in s)s[i]&&(!I.ie6||encodeURIComponent(s[i]).length<200)&&(t[i]=s[i]);return t}var H=S.jQuery,J=H(t),G=H(e);t.postMessage&&(t.addEventListener?t.addEventListener("message",g,!1):t.attachEvent&&t.attachEvent("onmessage",g)),S.scrollTo=function(t){var e=t.offset().top;(e<J.scrollTop()||e>J.scrollTop()+J.height())&&H("html, body").animate({scrollTop:e-40},200,"swing")},S.toJSON=function(t){var e=/\r?\n/g,s=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,i=/^(?:select|textarea)/i,o=t.map(function(){return this.elements?H.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||i.test(this.nodeName)||s.test(this.type))}).map(function(t,s){var i=H(this).val();return null==i?null:H.isArray(i)?H.map(i,function(t){return{name:s.name,value:t.replace(e,"\r\n")}}):{name:s.name,value:i.replace(e,"\r\n")}}).toArray(),n={};return H.each(o,function(){n[this.name]=this.value}),n},S.resetNotify=function(){var t=H("#ds-notify"),s=rt.data;t[0]||(t=H('<div id="ds-notify"></div>').css({hidden:{display:"none"},"top-right":{top:"24px",right:"24px"},"bottom-right":{bottom:"24px",right:"24px"}}[nt.data.notify_position]).delegate(".ds-notify-unread a","click",function(){return k(H(this).data("type")),!1}).appendTo(e.body)),t.html(tt.notify(s))[!s.comments&&!s.notifications||"hidden"===nt.data.notify_position||H(".ds-dialog")[0]?"hide":"show"]()},rt.on("reset",S.resetNotify),st.Replybox=function(t){this.embedThread=t},st.Replybox.prototype={render:function(t){function s(t){t.data("submitting",!0),t.find(".ds-post-button").addClass("ds-waiting").html(U.posting)[0].disabled=!0}function i(t){t.data("submitting",!1),t.find(".ds-post-button").removeClass("ds-waiting").html(U.post)[0].disabled=!1}var o=this,r=o.embedThread,c=r.options,h=function(){S.require("smilies",function(){})},p={thread:r,options:c,inline:t,params:{thread_id:r.threadId,parent_id:"",nonce:S.nonce},repostArray:[],checked:0};for(var v in at.data.repostOptions)at.data.repostOptions[v]&&(p.repostArray.push(v),p.checked=1);var g=o.el=H(tt.replybox(p)).click(h),b=g.find("form"),y=b.find("input[type=checkbox]")[0],w=b.find("a.ds-service-icon, a.ds-service-icon-grey"),x=f(b.find("textarea")).focus(h).keyup(a).keyup(d).bind("focus mousedown mouseup keyup",u),T=g.find(".ds-add-emote").click(function(t){var s=S.smiliesTooltip;return T.toggleClass("ds-expanded").hasClass("ds-expanded")?(s||(s=S.smiliesTooltip=new st.SmiliesTooltip,s.render(),S.require("smilies",function(){s.reset("微博-默认")})),s.replybox=o,s.el.appendTo(e.body).css({top:o.el.offset().top+o.el.outerHeight()+4+"px",left:o.el.find(".ds-textarea-wrapper").offset().left+"px"}),H(e.body).click(_)):_(t),!1}),_=(g.find(".ds-add-image").click(function(t){var s=x[0],i=s.value,o="Paste image address here",n='<img src="'+o+'" />';if(e.selection){s.value=i.substring(0,x.data("ds-range-start"))+n+i.substring(x.data("ds-range-end"),i.length),s.value=s.value.replace("Leave a comment...",""),s.focus();var a=e.selection.createRange();a.collapse(),a.findText(o),a.select()}else{s.value=i.substring(0,s.selectionStart)+n+i.substring(s.selectionEnd);var r=s.value.search(o);s.setSelectionRange(r,r+o.length),s.focus()}t.preventDefault()}),o.hideSmilies=function(){T.removeClass("ds-expanded"),S.smiliesTooltip.el.detach(),H(e.body).unbind("click",_)}),k=function(t,e){var s=N(tt["dialog-anonymous"]({services:["weixin","weibo","qq","douban"],options:c})),i=s.el.find(".ds-dialog").css("width","320px");if(i.find(".ds-icons-32 a").click(l),!c.deny_anonymous){var o=s.el.find("form");o.submit(function(){var t=o.find("input[name=author_email]").val();return!t&&!c.require_guest_email||t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?(e(S.toJSON(o)),s.close(),!1):(alert("Please input a valid Email address."),!1)}),o.find("input[name=author_name]")[0].focus()}};c.deny_anonymous&&x.focus(function(){if(n()){k(b,C);var t=function(e){e.stopPropagation(),x.unbind("click",t)};x.click(t)}return!1});var C=function(t){s(b),A.post("posts/create",H.extend(S.toJSON(b),t),function(t){var e=lt[t.response.post_id]=new Q(t.response),s=P(o.postList,e,c);if("asc"==c.order==("top"==c.formPosition)&&S.scrollTo(s),r.data.comments++,r.updateCounter("duoshuo"),x.val("").trigger("keyup"),i(b),g.hasClass("ds-inline-replybox")&&(g.detach(),o.actionsBar.removeClass("ds-reply-active")),m)try{m.removeItem("ds_draft_"+r.threadId)}catch(n){}},function(t){i(b),alert(t.errorMessage)})};b.submit(function(){if(b.data("submitting"))return!1;var t=H.trim(b[0].message.value);return""==t||!I.placeholder&&t==x.attr("placeholder")?(alert("You don't seem to have input anything..."),!1):(n()?k(b,C):C(),!1)});var $=function(t){return H(t).hasClass("ds-service-icon-grey")?null:H(t).attr("data-service")};if(w.click(function(){return H(this).toggleClass("ds-service-icon-grey").toggleClass("ds-service-icon"),y.value=H.map(w,$).join(","),y.checked=""!=y.value,!1}),H(y).change(function(){var t=this.checked;w[t?"removeClass":"addClass"]("ds-service-icon-grey")[t?"addClass":"removeClass"]("ds-service-icon"),this.value=H.map(w,$).join(",")}),!t&&m){var E="ds_draft_"+r.threadId;x.bind("focus blur keyup",function(t){var e=H(t.currentTarget).val();try{m[E]=e}catch(t){}}),m[E]&&x.val(m[E])}return this}},st.Dialog=B.extend({init:function(t,e){(this.el=H("#ds-wrapper"))[0]||(this.el=h(H('<div id="ds-wrapper"></div>'))),this.options=H.extend({width:600},e),t!==s&&H(t).attr("id","ds-reset").appendTo(this.el)},open:function(){function t(t){return 27==t.which?(i.close(),!1):void 0}function s(){return i.close(),!1}var i=this;return i.el.hide().appendTo(e.body).fadeIn(200),I.ie6&&i.el.css("top",J.scrollTop()+100),i.el.show().find(".ds-dialog").delegate("a.ds-dialog-close","click",function(){return i.close(),!1}).click(o),G.keydown(t),H(e.body).click(s),i.close=function(){G.unbind("keydown",t),H(e.body).unbind("click",s),i.el.fadeOut(200,function(){H(this).remove()}),i.trigger("close")},i}}),tt.likePanel=function(t){return t.likes?'<span class="ds-highlight">'+t.likes+(1==t.likes?"</span> person likes":"</span> people like"):""},st.Meta=function(t){this.embedThread=t},st.Meta.prototype={render:function(){function i(i){function n(t){r.set(t),a.resetLikePanel()}function c(){a.tooltip.detach(),H(e.body).unbind("click",c)}function u(e){switch(this.className){case"ds-like-tooltip-close":c(e);break;default:if(!t.open(this.href,"_blank","height=500,width=600,top=0,left=0,toolbar=no,menubar=no,resizable=yes,location=yes,status=no"))return}return!1}var h=l.hasClass("ds-thread-liked");if(A.post("threads/vote",{thread_id:a.embedThread.threadId,vote:h?0:1},n),l.toggleClass("ds-thread-liked"),l.find(".ds-thread-like-text").text(h?"Like":"Liked"),h)return a.tooltip&&c(i),!1;if(a.tooltip===s){var p=tt.likeTooltip({services:{weibo:"Sina Weibo",qzone:"Qzone",douban:"Douban",qq:"QQ",google:"Google+"},thread_id:r.data.thread_id});a.tooltip=H(p).click(o).delegate("a","click",u)}var f={};return f.left=0,f.top=d.position().top+d.outerHeight()-4+"px",a.tooltip.appendTo(a.embedThread.innerEl).css(f),H(e.body).click(c),!1}var a=this,r=a.embedThread.model,d=a.el=H(tt.meta(r.toJSON())),l=d.find(".ds-like-thread-button");return l.click(i),a.resetLikePanel(),n()&&d.hide(),a},resetLikePanel:function(){this.el.find(".ds-like-panel").html(tt.likePanel(this.embedThread.model.toJSON()))}},st.PostListHead=function(t){this.embedThread=t},st.PostListHead.prototype={render:function(){function t(t){n.find("a.ds-current").removeClass("ds-current"),i.params.page=1;var e=t.currentTarget;switch(e.className){case"ds-comments-tab-duoshuo":i.params.source="duoshuo",s.replybox.el.show();break;case"ds-comments-tab-repost":i.params.source="repost",s.replybox.el.hide();break;case"ds-comments-tab-weibo":i.params.source="weibo",s.replybox.el.hide();break;case"ds-comments-tab-qqt":i.params.source="qqt",s.replybox.el.hide()}return H(e).addClass("ds-current"),i.refetch(),!1}function e(){return a.find("a.ds-current").removeClass("ds-current"),i.params.order=s.options.order=this.className.replace("ds-order-",""),i.params.page=1,i.refetch(),H(this).addClass("ds-current"),!1}var s=this.embedThread,i=s.postList,o=this.el=H(tt.postListHead({thread:s.model.toJSON(),options:s.options})),n=o.find("ul.ds-comments-tabs");n.delegate(".ds-tab a","click",t);var a=o.find(".ds-sort");return a.delegate("a","click",e),a.find(".ds-order-"+i.params.order).addClass("ds-current"),this}},st.Paginator=function(t){function e(){return o.params.page=parseInt(this.innerHTML),o.refetch(),i.find(".ds-current").removeClass("ds-current"),H(this).addClass("ds-current"),!1}t=t||{};var s=this,i=s.el=t.el||H('<div class="ds-paginator"></div>'),o=s.collection=t.collection;i.delegate("a","click",e)},st.Paginator.prototype={reset:function(t){function e(t){o.push('<a data-page="'+t+'" href="javascript:void(0);">'+t+"</a>")}var s,i=this.collection.params.page||1,o=[];if(i>1)for(e(1),s=i>4?i-2:2,s>2&&o.push('<span class="page-break">...</span>');i>s;s++)e(s);if(o.push('<a data-page="'+i+'" href="javascript:void(0);" class="ds-current">'+i+"</a>"),i<t.pages){for(s=i+1;i+4>=s&&s<t.pages;s++)e(s);s<t.pages&&o.push('<span class="page-break">...</span>'),e(t.pages)}this.el.html('<div class="ds-border"></div>'+o.join(" "))[t.pages>1?"show":"hide"]()}},S.addSmilies=function(t,e){var s=S.smiliesTooltip;s&&s.el.find("ul.ds-smilies-tabs").append("<li><a>"+t+"</a></li>"),S.smilies[t]=e},st.SmiliesTooltip=function(){},st.SmiliesTooltip.prototype={render:function(){function t(){var t=s.replybox,i=t.el.find("textarea"),o=i[0],n=o.value;if(e.selection){o.value=n.substring(0,i.data("ds-range-start"))+this.title+n.substring(i.data("ds-range-end"),n.length),o.value=o.value.replace(U.leave_a_message,""),o.focus();var a=e.selection.createRange();a.moveStart("character",i.data("ds-range-start")+this.title.length),a.collapse(),a.select()}else{var r=o.selectionStart+this.title.length;o.value=n.substring(0,o.selectionStart)+this.title+n.substring(o.selectionEnd),o.setSelectionRange(r,r)}t.hideSmilies(),o.focus()}var s=this,i=s.el=H(tt.smiliesTooltip(j));return i.click(o).find("ul.ds-smilies-tabs").delegate("a","click",function(){s.reset(this.innerHTML)}),i.find(".ds-smilies-container").delegate("img","click",t),this},reset:function(t){function e(e,s){var o=0===t.indexOf("微博")?"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/"+s.replace("_org","_thumb"):S.STATIC_URL+"/images/smilies/"+s;"WordPress"===t&&(e=" "+e+" "),i+='<li><img src="'+o+'" title="'+w(e)+'" /></li>'}var s=this.el.find("ul.ds-smilies-tabs");s.find("a.ds-current").removeClass("ds-current"),s.find("a").filter(function(){return this.innerHTML==t}).addClass("ds-current");var i="<ul>";return H.each(j[t],e),i+="</ul>",this.el.find(".ds-smilies-container").html(i),this}},tt.postPlaceholder=function(){return['<li class="ds-post ds-post-placeholder">',U.no_comments_yet,"</li>"].join("")};var Z=H('<div id="ds-bubble"><div class="ds-bubble-content"></div><div class="ds-arrow ds-arrow-down ds-arrow-border"></div><div class="ds-arrow ds-arrow-down"></div></div>'),X=Z.find(".ds-bubble-content").delegate("a.ds-ctx-open","click",function(){function t(t){function e(t,e){return tt.ctxPost({post:t,index:e})}$.log(H.map(t.response,e).join("\n")),s.el.find("ol"),s.el.find("ol").html(H.map(t.response,e).join("\n"))}var e={};e.post_id=X.attr("data-post-id"),A.get("posts/conversation",e,t);var s=N('<h2>Check out the dialog</h2><ol id="ds-ctx"></ol>');return s.el.find(".ds-dialog").css("width","600px"),s.el.find(".ds-dialog-body").css({"max-height":"350px",_height:"350px","overflow-y":"auto","padding-top":"10px"}),!1}),et=bubbleOutTimer=0;Z.mouseenter(q).mouseleave(D),st.PostList=function(t){t&&(t.params&&(this.params=t.params),t.embedThread&&(this.embedThread=t.embedThread)),this.el=H('<ul class="ds-comments"></ul>')},st.PostList.prototype={url:"threads/listPosts",render:function(){return L.call(this.el,this.embedThread,this.embedThread.options),this},reset:function(t){var e=this.embedThread.options;this.el.html(t[0]?H.map(lt.getJSON(t),function(t){return tt.post({post:t,options:e})}).join(""):tt.postPlaceholder())},refetch:function(){function t(t){lt.set(t.parentPosts||t.relatedPosts),ct.set(t.users),s.reset(t.response),s.embedThread.paginator.reset(t.cursor),s.el.fadeTo(200,1),S.scrollTo(s.el),i.remove()}var s=this,i=H(tt.indicator()).appendTo(e.body).fadeIn(200);s.el.fadeTo(200,.5),A.get(s.url,s.params,t)}},st.RelatedRead=function(){this._init()},st.RelatedRead.prototype={uri:"base/recommend",_init:function(){this.el=H('<div id="ds-related-reads"></div>'),this._count_timer=null},_unpackImages:function(t){for(var e,s=t.image_list.slice(0,3),i=[];s.length;)e=s.shift(),i.push(e.medium_image);return i},_transform:function(t){for(var e=[],s=0,i=t.length;i>s;s++)e.push({url:t[s].url,title:t[s].title,type:t[s].type,source:t[s].source,imgs:this._unpackImages(t[s]),timeStamp:1e3*t[s].publish_time,hasVideo:t[s].has_video,videoDuration:this._parseVideoDuration(t[s].video_duraion)});return e},_parseVideoDuration:function(t){t=+t;var e=Math.floor(t/3600),s=Math.floor((t-60*e*60)/60),t=t-60*e*60-60*s,i=""+(e?(10>e?"0"+e:e)+" : ":"")+(10>s?"0"+s:s)+" : "+(10>t?"0"+t:t);return i},load:function(t){var e=this;A.get(this.uri,{thread_id:t,url:p.href},function(t){0==t.code?e.render(t.response):e.renderError()})},renderError:function(){},render:function(t){this.el.html(tt["related-read"](this._transform(t)));try{var e=this.el.find("header"),s=this.el.find("section"),i=Number(/([0-9.]+)px/.exec(e.css("borderLeft"))[1]),o=Number(/([0-9.]+)px/.exec(e.css("paddingLeft"))[1]),n=s.offset().left;e.css("marginLeft",-Math.min(i+o,n)),this.count()}catch(a){}},count:function(){var t=this;!function e(){clearTimeout(t._count_timer),t.el.find(".ds-reads-date").each(function(){var t,e,s,i,o,n,a=H(this).data("date"),r=(new Date).getTime(),d=r-a,l=new Date(a);d>864e5?(t=l.getFullYear(),e=l.getMonth()+1,s=l.getDate(),H(this).html(t+"-"+e+"-"+s)):d>36e5?(i=Math.floor(d/60/60/1e3),H(this).html(1==parseInt(i)?i+"hour ago":i+"hours ago")):d>6e4?(o=Math.floor(d/60/1e3),H(this).html(1==parseInt(o)?"one minute ago":o+"minutes ago")):(n=Math.floor(d/1e3),H(this).html(1==parseInt(n)?"one second ago":n+"seconds ago"))}),t._count_timer=setTimeout(e,6e4)}()},stopCount:function(){clearTimeout(this._count_timer)}},st.EmbedThread=F.extend({uri:"threads/listPosts",params:"thread-id local-thread-id source-thread-id thread-key category channel-key author-key author-id url limit order max-depth form-position container-url"+(v.match(/MSIE 6\.0/)?"":" title image thumbnail"),render:function(){var t=this.el;if("请将此处替换成文章在你的站点中的ID"===t.data("thread-key"))return alert("请设置正确的 data-thread-key 属性"),!1;t.attr("id","ds-thread").append(tt.waitingImg());var e=t.width(),s=t.data("url")||!t.attr("data-thread-id")&&H("link[rel=canonical]").attr("href");s?t.data("url",x(s)):t.data("container-url",p.href),e&&400>=e&&t.addClass("ds-narrow").data("max-depth",1)},updateCounter:function(t){function e(t){return t.substr(t.indexOf("}")+1)}var s={duoshuo:["comments",e(U.comments_multiple)||"comments"],repost:["reposts",e(U.reposts_multiple)||"reposts"],weibo:["weibo_reposts",e(U.weibo_reposts_multiple)||"Sina Weibo"],qqt:["qqt_reposts",e(U.qqt_reposts_multiple)||"Tencent Weibo"]};for(var i in s)if(!t||t==i){var o=this.data[s[i][0]];this.el.find(".ds-comments-tab-"+i).html(this.el.hasClass("ds-narrow")?'<span class="ds-service-icon ds-'+i+'"></span>'+o:(o?'<span class="ds-highlight">'+o+"</span>":"0")+s[i][1])}},onError:function(t){this.el.html("Unexpected Error occurred on the comment box("+t.code+"): "+t.errorMessage)},onload:function(e){var i=this,o=i.threadId=e.thread.thread_id,a=e.cursor,r=i.options=e.options,d=i.innerEl=h(H('<div id="ds-reset"></div>').appendTo(i.el));i.model=new Y(i.data=e.thread),lt.set(e.parentPosts||e.relatedPosts),ct.set(e.users),i.el.find("#ds-waiting").remove(),e.options&&e.options.show_recommend&&(i.relatedRead=new st.RelatedRead,i.relatedRead.load(e.thread.thread_id),d.append(i.relatedRead.el)),r.like_thread_enabled&&(i.meta=new st.Meta(i),d.append(i.meta.render().el)),r.hot_posts&&e.hotPosts&&e.hotPosts.length&&(i.hotPosts=new st.HotPosts(H('<div class="ds-rounded"></div>'),{max_depth:1,show_context:r.show_context}),i.hotPosts.thread=i,d.append(i.hotPosts.el),i.hotPosts.onload({list:lt.getJSON(e.hotPosts)})),i.postListHead=new st.PostListHead(i),i.postList=new st.PostList({embedThread:i,params:{source:"duoshuo",thread_id:o,max_depth:r.max_depth,order:r.order,limit:r.limit}}),i.postList.render().reset(e.response),i.paginator=new st.Paginator({collection:i.postList}),i.paginator.reset(a);var c=i.replybox=new st.Replybox(i);c.postList=i.postList.el,n()?i.loginButtons=H(tt.loginButtons()).delegate("a.ds-more-services","click",function(){return i.loginButtons.find(".ds-additional-services").toggle(),!1}).delegate("a.ds-service-link","click",l):i.toolbar=H(tt.toolbar()).delegate(".ds-account-control","mouseenter",function(){H(this).addClass("ds-active")}).delegate(".ds-account-control","mouseleave",function(){H(this).removeClass("ds-active")}).delegate("a.ds-bind-more","click",function(){var t=N(tt["dialog-bind-more"]()).el.find(".ds-dialog").addClass("ds-dialog-bind-more").css("width","300px");return t.find("a.ds-service-link").click(l),!1}).delegate("a.ds-unread-comments-count","click",function(){return k("unread-comments"),!1});var u=['<a name="respond"></a>',i.toolbar||i.loginButtons,c.render().el];"top"==r.formPosition&&H.fn.append.apply(d,u),d.append(i.postListHead.render().el,i.postList.el,i.paginator.el),"bottom"==r.formPosition&&H.fn.append.apply(d,u),d.append(tt.poweredBy(r.poweredby_text)),i.updateCounter(),e.alerts&&H.each(e.alerts,function(t,e){H('<div class="ds-alert">'+e+"</div>").insertBefore(i.toolbar||loginButtons)}),r.message&&c.el.find("textarea").val(r.message).focus(),rt.on("reset",function(){var t=rt.data.comments||0;d.find("a.ds-unread-comments-count").html(t).attr("title",t?"You've got"+t+"unread replies":"You haven't got any unread replies").css("display",t?"inline":"none")}),r.mzadx_id&&(S.require("mzadxN",function(){}),H('<div id="MZADloginWithList_'+r.mzadx_id+'" style="margin:0 auto;"></div>').appendTo(d),__mz_rpq=t.__mz_rpq||[],__mz_rpq.push({l:[r.mzadx_id],r:"1",_srv:"MZADloginWithList",_callback:function(){}})),S.thread=i,rt.data!==s&&rt.trigger("reset"),n()||R.send({visit_thread_id:i.threadId})},onMessage:function(t){P(this.postList.el,new Q(t),this.options)}}),st.HotPosts=F.extend({tmpl:"hotPosts",params:"show-quote",render:function(){return this.el.attr("id","ds-hot-posts"),this},onload:function(t){t.options=H.extend(this.options,t.options),F.prototype.onload.call(this,t),L.call(this.el.find("ul"),this.thread,this.options)}}),st.RecentComments=F.extend({tmpl:"commentList",uri:"sites/listRecentPosts",params:"show-avatars show-time show-title avatar-size show-admin excerpt-length num-items channel-key",render:function(){this.el.attr("id","ds-recent-comments")},prepare:function(t){return{list:H.map(t.response,function(t){return new Q(t).toJSON()})}}}),st.RecentVisitors=F.extend({tmpl:"recentVisitors",uri:"sites/listVisitors",params:"show-time avatar-size num-items channel-key",render:function(){this.el.children().detach(),this.el.attr("id","ds-recent-visitors").append(this.waitingEl=H(tt.waitingImg()))}}),st.TopThreads=F.extend({tmpl:"topThreads",uri:"sites/listTopThreads",params:"range num-items channel-key",render:function(){this.el.children().detach(),this.el.attr("id","ds-top-threads").append(this.waitingEl=H(tt.waitingImg()))}}),st.LoginWidget=F.extend({tmpl:"loginWidget",render:function(){var t=this.el;t.attr("id","ds-login").html(tt.loginWidget(["weixin","weibo","qq","renren","kaixin","douban"])),t.find("a").click(l),t.find("a.ds-logout").attr("href",K.logoutUrl())}}),st.ThreadCount=F.extend({onload:function(t){var e=this.el,s=e.data("count-type")||"comments",i=t.data[s];e[e.data("replace")?"replaceWith":"html"](U[s+"_"+(i?i>1?"multiple":"one":"zero")].replace("{num}",i))}}),st.ShareWidget=F.extend({tmpl:"shareWidget",render:function(){var t={copyright:"Duoshuo Share Widget",services:["weibo","qzone","qqt","douban","qq","google","wechat","youdao","facebook","twitter","linkedin"]};this.el.attr("id","ds-share"),this.el.children().attr("id","ds-reset"),this.el.find(".ds-share-aside-inner").html(tt.shareWidget(t)),this.el.find(".ds-share-icons-more").html(tt.shareWidget(t)),this.el.find(".ds-share-icons-more").hide(),this.el.hasClass("flat")&&this.el.find("a").each(function(){H(this).addClass("flat")}),h(this.el),this.delegateEvents()},delegateEvents:function(){var s=this,o=s.el;if(o.children().hasClass("ds-share-inline")){var n=".ds-share-icons-more",a=o.find(n),d="[data-toggle=ds-share-icons-more]";o.delegate(d,"mouseover",function(){a.show()}),o.delegate(d,"mouseout",function(){a.hide()}),o.delegate(n,"mouseover",function(){a.show()}),o.delegate(n,"mouseout",function(){a.hide()})}else{var l=o.children().hasClass("ds-share-aside-left")?"slide-to-right":"slide-to-left",c=o.children();if(!r.cssProperty("transition")){var u=o.children().hasClass("ds-share-aside-left")?"left":"right";o.delegate(".ds-share-aside-toggle","mouseover",function(){var t={},s=I.ie6&&"right"===u;s?t.left=(e.documentElement.scrollLeft+e.documentElement.clientWidth-this.offsetWidth-(parseInt(this.currentStyle.marginLeft,10)||0)-parseInt(this.currentStyle.marginRight,10)||0)-195:t[u]=0,c.animate(t,200)}),o.delegate(".ds-share-aside-inner","mouseleave",function(){var t={},s=I.ie6&&"right"===u;s?t.left=(e.documentElement.scrollLeft+e.documentElement.clientWidth-this.offsetWidth-(parseInt(this.currentStyle.marginLeft,10)||0)-parseInt(this.currentStyle.marginRight,10)||0)+230:t[u]=-229,c.animate(t,200)})}o.delegate(".ds-share-aside-toggle,.ds-share-aside-inner","mouseover",function(){c.addClass(l)}),o.delegate(".ds-share-aside-toggle,.ds-share-aside-inner","mouseleave",function(){c.removeClass(l)})}o.delegate("a","click",function(e){var s=H(this).data("service");if(!o.data("url"))return void alert("请设置data-url");if("wechat"===s){var n=i()+"/api/qrcode/getImage.png",a="?size=240&text="+o.data("url"),d=N(tt["dialog-qrcode"]({qrcode_url:n+a,url:o.data("url")}));d.el.find(".ds-dialog").css("width","320px")}else{var l=i()+"/share-proxy/?"+r.param({service:H(this).data("service"),thread_key:o.data("threadKey"),title:o.data("title"),images:o.data("images"),content:o.data("content"),url:o.data("url")});l.indexOf("service")<0||t.open(l,"_blank")}e.preventDefault(),e.stopPropagation()})}});var ot=0;S.initSelector=function(t,e){function s(t){M(t),r.extend(U,t.options),dt.set(t.response)}var i=[];!C()||!H.isReady&&E||H(t).each(function(t,s){var o=H(s);if(!o.data("initialized")){o.data("initialized",!0);var n=new st[e.type](o,e);if(it.push(n),"ThreadCount"===e.type){var a=o.attr("data-thread-key");o.attr("data-channel-key")&&(a=o.attr("data-channel-key")+":"+a),i.push(a),dt[a]||(dt[a]=new Y({})),dt[a].on("reset",function(){n.onload(this)})}else if(n.uri){var r={};H.each(n.params.split(" "),function(t,e){r[e.replace(/-/g,"_")]=o.attr("data-"+e)||o.data(e);
}),A.get(n.uri,z(r),function(t){n.load(t)})}}}),i.length&&A.get("threads/counts",z({threads:i.join(",")}),s)},(S.initView=function(){H.each(O,S.initSelector)})(),H(function(){if(!c){if(!C())return $.error("缺少 duoshuoQuery 的定义");$.warn("请在加载多说 embed.js 之前定义 duoshuoQuery")}setInterval(function(){H(".ds-time").each(function(){var t=H(this).attr("datetime");t&&(this.innerHTML=S.elapsedTime(t))})},2e4),c.ondomready&&c.ondomready(),S.initView(),!ot&&c.short_name&&A.get("analytics/ping",z({}),M)})})}}(window,document)})}]);
//# sourceMappingURL=commonpage.min.js.map