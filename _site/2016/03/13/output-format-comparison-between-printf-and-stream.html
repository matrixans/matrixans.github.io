<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="answer">
  <meta name="keywords"  content="">
  <!-- <link rel="shortcut icon" href="/img/favicon.ico"> -->

  <title>常用输出格式归纳：printf 和 stream - matrix answer</title>

  <link rel="canonical" href="https://matrixans.github.io/2016/03/13/output-format-comparison-between-printf-and-stream.html">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/mensu-blog.css">
  <link rel="stylesheet" href="/css/monokai_sublime.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">

  <!-- Hux Delete, sad but pending in China
  <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
  css'>
  -->


  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="/about.html">About</a>
                    </li>
                    
                    <li>
                        <a href="/tags.html">Tags</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div id="backtotop">
  <div class="backtotop-btn">
    <div class="arrow-upward"></div>
    <div class="vertical-stick"></div>
  </div>
</div>

<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/" width="0" height="0"> -->

<!-- header -->
<header class="intro-header" >
  <div class="container">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <div class="post-heading">
        <div class="tags">
          
          <a class="tag" href="/tags.html#归纳" title="归纳">归纳</a>
          
          <a class="tag" href="/tags.html#C / C++" title="C / C++">C / C++</a>
          
        </div>
        <h1>常用输出格式归纳：printf 和 stream</h1>
        
        
        <h2 class="subheading">output format comparison between c-style printf and cpp-style stream</h2>
        
        <span class="meta">last edited by Mensu on 2016-09-04</span>
      </div>
    </div>
  </div>
</header>

<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2
                      col-md-10 col-md-offset-1
                      post-container">
          <ul class="pager pager-top">
            
            <li class="previous">
                <a href="/2016/02/20/merge-sort.html" data-toggle="tooltip" data-placement="top" title="合并排序">&larr; Previous Post</a>
            </li>
            
            
        </ul>

          <blockquote>
  <p>The article was initially posted on <strong>2016-03-13</strong>.</p>
</blockquote>

<p>说起输出格式的控制，C 中用得最多的是各种 printf ，例如 <code class="highlighter-rouge">printf</code>、<code class="highlighter-rouge">fprintf</code>、<code class="highlighter-rouge">sprintf</code> ，声明于 <code class="highlighter-rouge">&lt;stdio.h&gt;</code> ，调用时必须通过字符串设置格式</p>

<p>而 C++ 中一般使用各种 stream ，例如 <code class="highlighter-rouge">ostream</code>、<code class="highlighter-rouge">ofstream</code>、<code class="highlighter-rouge">ostringstream</code> ，声明于 <code class="highlighter-rouge">&lt;iostream&gt;</code>、<code class="highlighter-rouge">&lt;fstream&gt;</code>、<code class="highlighter-rouge">&lt;sstream&gt;</code> 等，使用 stream 单纯地进行默认输出时十分简洁，而控制格式时则要通过自身的成员函数或者 <code class="highlighter-rouge">&lt;iomanip&gt;</code> 中的流控制符（stream manipulators），显得略微繁琐</p>

<p>下面按照需求进行归纳</p>

<h1 id="n-">整数 n 进制</h1>

<p>printf</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">printf</span><span class="p">(</span><span class="s">"十六进制小写：%x"</span>
     <span class="s">"</span><span class="se">\n</span><span class="s">十六进制大写：%X"</span>
     <span class="s">"</span><span class="se">\n</span><span class="s">八进制：%o"</span>
     <span class="s">"</span><span class="se">\n</span><span class="s">十进制：%d"</span>
     <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-set-bases-printf.png" alt="set bases in printf" /></p>

<hr />

<p>stream</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"十六进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">hex</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"八进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"十进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">dec</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-set-bases-stream-specific-iomanipulator.png" alt="set bases in stream using specific manipulators" /></p>

<p>或者用流控制符 <code class="highlighter-rouge">std::setbase(int __base)</code> 设置 n 进制。注意，如果传入的不是 8、10、16，则输出<strong>十进制</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"十六进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setbase</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"八进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setbase</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"十进制："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setbase</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-set-bases-stream-setbase.png" alt="set bases in stream using std::setbase" /></p>

<h1 id="setiosflags--coutsetf">setiosflags 和 cout.setf</h1>

<p>控制 stream 的输出格式，除了使用有具体含义的流控制符，还可以使用以下的</p>

<ul>
  <li>立 flag 流控制符 <code class="highlighter-rouge">std::setiosflags(std::ios_base::fmtflags __mask)</code></li>
  <li>stream 的成员函数如 <code class="highlighter-rouge">std::cout.setf(std::ios_base::fmtflags __fmtfl)</code></li>
</ul>

<p>这两者效果相同，通过传入形如 <code class="highlighter-rouge">std::ios::xxx</code> 的参数（ios 参数）设置相应的输出格式。需要传入多个参数时，用按位或运算符 <code class="highlighter-rouge">|</code> 连接</p>

<p>相反，取消设置使用</p>

<ul>
  <li><code class="highlighter-rouge">std::resetiosflags(std::ios_base::fmtflags __mask)</code></li>
  <li><code class="highlighter-rouge">std::cout.unsetf(std::ios_base::fmtflags __fmtfl)</code></li>
</ul>

<p>例如，ios 参数 <code class="highlighter-rouge">std::ios::uppercase</code> 使十六进制的字母部分大写，我们可以：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="c1">// 具体含义的流控制符 std::uppercase
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"使用流控制符 std::uppercase</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="s">"十六进制大写："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">hex</span>
                            <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">uppercase</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"  取消："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// 立 flag 流控制符 std::setiosflags
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"使用立flag流控制符 std::setiosflags</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="s">"十六进制大写："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">hex</span>
                           <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"  取消："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// 成员函数 std::cout.setf
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"使用成员函数 std::cout.setf</span><span class="se">\n</span><span class="s">  "</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">setf</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"十六进制大写："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">hex</span>
                            <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">unsetf</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"  取消："</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-uppercase-stream.png" alt="std::uppercase" /></p>

<h2 id="section">对应关系</h2>

<p>大部分不带参数的流控制符 <code class="highlighter-rouge">XXX</code> ，都对应着 ios 参数 <code class="highlighter-rouge">std::ios::XXX</code> 。也就是说</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
// 具体的流控制符
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">XXX</span><span class="p">;</span>
<span class="c1">// 立 flag 流控制符
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">XXX</span><span class="p">);</span>
<span class="c1">// 成员函数
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">setf</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">XXX</span><span class="p">);</span>
</code></pre>
</div>

<p>一般这三种方式的效果相同。而在设置三大格式：进制、对齐方式、小数表示法的时候，具体的流控制符与其他两种方式的效果不同</p>

<p>具体来说，具体的流控制符 <code class="highlighter-rouge">std::XXX</code> 或 <code class="highlighter-rouge">std::setXX</code> 会先将对应格式<strong>恢复成默认状态</strong>，再进行新的设置，而其他两种方式只是在单纯地往之前的结果上“叠加”新的效果。而“叠加”的结果十分复杂，不一定如我们所愿</p>

<p>所以，以设置八进制为例，要么直接用流控制符 <code class="highlighter-rouge">std::oct</code>、<code class="highlighter-rouge">std::setbase(int __base)</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">// 或者 std::cout &lt;&lt; std::setbase(8) &lt;&lt; num &lt;&lt; std::endl;
</span></code></pre>
</div>

<p>要么，就要<strong>先取消目前的进制设置</strong>（默认是十进制），在设置新的进制</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">unsetf</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">dec</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">oct</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p>要么，就用<strong>带两个参数</strong>的成员函数 <code class="highlighter-rouge">std::cout.setf(...)</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">setf</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">oct</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">basefield</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p>由此可见，具体的流控制符 <code class="highlighter-rouge">std::oct</code>、<code class="highlighter-rouge">std::setbase(int __base)</code> 自带清除先前设置的效果，十分方便</p>

<h2 id="section-1">取消设置</h2>

<p>最好养成用完格式设置后立刻恢复的习惯。可以使用上面提到的 <code class="highlighter-rouge">std::resetiosflags(...)</code>、<code class="highlighter-rouge">std::cout.unsetf(...)</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">oct</span><span class="p">);</span>
</code></pre>
</div>

<hr />

<p>对于不带参数的流控制符，还可以用成员函数 <code class="highlighter-rouge">std::cout.flags</code> 恢复</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span>
<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="c1">// 设置前备份
</span><span class="n">std</span><span class="o">::</span><span class="n">ios_base</span><span class="o">::</span><span class="n">fmtflags</span> <span class="n">defaultFlags</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">();</span>

<span class="c1">// 用流控制符处理格式
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">oct</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// 还原
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">(</span><span class="n">defaultFlags</span><span class="p">);</span>
</code></pre>
</div>

<hr />

<p>对于三大格式，还可以用下面三个 ios 参数，而不必关心他们目前具体是哪种格式</p>

<ul>
  <li><code class="highlighter-rouge">std::ios::basefield</code> 进制</li>
  <li><code class="highlighter-rouge">std::ios::adjustfield</code> 对齐方式</li>
  <li><code class="highlighter-rouge">std::ios::floatfield</code> 小数表示法</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">basefield</span><span class="p">);</span>  <span class="c1">// 恢复回十进制
</span></code></pre>
</div>

<p>而除了这三大格式，其他不带参数的流控制符 <code class="highlighter-rouge">std::XXX</code> ，一般都有起相反作用的流控制符 <code class="highlighter-rouge">std::noXXX</code> 与其对应</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">nouppercase</span><span class="p">;</span>  <span class="c1">// 取消字母大写
</span></code></pre>
</div>

<h1 id="section-2">宽度 对齐 填补</h1>

<p>printf 的限制很大，例如 “填补字符” 只有 ‘0’ 和 空格 ‘ ‘，使用 ‘0’ 时还只能使用右对齐。因为左对齐的 <code class="highlighter-rouge">-</code> 会排斥填补的 <code class="highlighter-rouge">0</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C code
</span><span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"最小宽度为11，右对齐：%11.g%11g"</span>
    <span class="s">"</span><span class="se">\n</span><span class="s">最小宽度为11，左对齐：%-11g%-11.g"</span>
    <span class="s">"</span><span class="se">\n\n</span><span class="s">最小宽度为11，右对齐，左边空白补0：%011.g%11g"</span>
    <span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>

<span class="c1">// 应用：输出时间格式 12:08:03
</span><span class="kt">int</span> <span class="n">hour</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="n">minute</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"最小宽度为2，右对齐，如果宽度不足2，则在左边补0："</span>
        <span class="s">"%02d:%02d:%02d"</span>
        <span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">second</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-width-adjustment-fill-printf.png" alt="width, adjustment and fill in printf" /></p>

<hr />

<p>相比之下，stream 的填补更加灵活，可以自定义填补字符，而且 “左右对齐” 和 “填补字符” 可以自由组合</p>

<p><strong>注意</strong>，stream 在设置最小宽度时使用的</p>

<ul>
  <li>流控制符 <code class="highlighter-rouge">std::setw(int __n)</code></li>
  <li>成员函数 <code class="highlighter-rouge">std::cout.width(std::streamsize __wide)</code></li>
</ul>

<p><strong>仅对下一个输出有效</strong>，因此需要不断使用</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">double</span> <span class="n">num</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">;</span>

<span class="c1">// 注意，对于浮点数，stream 们的默认输出相当于 printf 的 %g
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"最小宽度为11，右对齐："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
                                  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="s">"最小宽度为11，左对齐："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">left</span>
                                  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
                                  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
                                  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">left</span><span class="p">)</span>
    
          <span class="o">&lt;&lt;</span> <span class="s">"最小宽度为11，右对齐，左边空白补0："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">right</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="sc">'0'</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="sc">' '</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">right</span><span class="p">)</span>
                                        
          <span class="o">&lt;&lt;</span> <span class="s">"最小宽度为11，左对齐，右边空白补*："</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">left</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="sc">'*'</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="sc">' '</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
                                              <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">left</span><span class="p">);</span>

<span class="c1">// 应用：输出时间格式 12:08:03
</span><span class="kt">int</span> <span class="n">hour</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="n">minute</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"最小宽度为2，右对齐，如果宽度不足2，则在左边补0："</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="sc">'0'</span><span class="p">)</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">hour</span> <span class="o">&lt;&lt;</span> <span class="sc">':'</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">minute</span> <span class="o">&lt;&lt;</span> <span class="sc">':'</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="sc">' '</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-width-adjustment-fill-stream.png" alt="width, adjustment and fill in stream" /></p>

<h1 id="section-3">符号</h1>

<p>printf 用 <code class="highlighter-rouge">+</code> 为十进制正数输出正号<br />
         用 空格 将十进制数的正号换成空格<br />
         用 <code class="highlighter-rouge">#</code> 为八进制和十六进制数输出 <code class="highlighter-rouge">0</code> 和 <code class="highlighter-rouge">0x</code></p>

<ul>
  <li>一类：进制号 <code class="highlighter-rouge">#</code> | 十进制正号 <code class="highlighter-rouge">+</code> &gt; 十进制空格</li>
  <li>二类：左对齐 <code class="highlighter-rouge">-</code> &gt; 补零 <code class="highlighter-rouge">0</code></li>
</ul>

<p>一类和二类自由组合</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C code
// 应用：避免输出 “+-6”
</span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">6</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"平面上某直线的一般方程：%dx%+dy%+d=0"</span>     <span class="c1">// 6个部分：%d x %+d y %+d = 0  （ 正号+
</span>    <span class="s">"</span><span class="se">\n\n</span><span class="s">正号 补0 最小宽度：%+07d%0+7d"</span>          <span class="c1">// 2个部分：%+07d %0+7d         （ 正号+ 与 填补0 自由组合，7设置最小宽度
</span>    <span class="s">"</span><span class="se">\n\n</span><span class="s">左对齐 进制号 最小宽度：%#-7x%-#7x%d"</span>    <span class="c1">// 3个部分：%#-7x %-#7x %d      （ 左对齐- 与 进制号# 自由组合，7设置最小宽度
</span>    <span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">,</span><span class="n">c</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-show-positive-or-base-sign-printf.png" alt="show positive or base sign in printf" /></p>

<hr />

<p>stream 用 流控制符 <code class="highlighter-rouge">std::showpos</code> 为十进制正数输出正号<br />
            用 流控制符 <code class="highlighter-rouge">std::showbase</code> 为八进制和十六进制数输出 <code class="highlighter-rouge">0</code> 和 <code class="highlighter-rouge">0x</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
// 应用：避免输出 “+-6”
</span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">6</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"平面上某直线的一般方程："</span>
          <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="sc">'x'</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">showpos</span>
          <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="sc">'y'</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="n">c</span> <span class="o">&lt;&lt;</span> <span class="s">"=0"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">showpos</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-show-positive-or-base-sign-stream.png" alt="show positive or base sign in stream" /></p>

<h1 id="section-4">小数</h1>

<p>printf</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C code
</span><span class="kt">double</span> <span class="n">small</span> <span class="o">=</span> <span class="mf">0.003406000400001</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">big</span> <span class="o">=</span> <span class="mf">42.213</span><span class="p">;</span>

<span class="c1">// 7位有效数字，去掉多余的0，输出普通计数法和科学计数法中较短的：使用g
// 大写G决定指数符号大写
</span><span class="n">printf</span><span class="p">(</span><span class="s">"7位有效数字，去掉多余的0：</span><span class="se">\n</span><span class="s">  "</span>
        <span class="s">"small = %.7g, big = %.7g"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">small</span><span class="p">,</span> <span class="n">big</span><span class="p">);</span>

<span class="c1">// 7位有效数字，显示多余的0和小数点：使用#
</span><span class="n">printf</span><span class="p">(</span><span class="s">"7位有效数字，显示多余的0：</span><span class="se">\n</span><span class="s">  "</span>
        <span class="s">"small = %#.7g, big = %#.7g"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">small</span><span class="p">,</span> <span class="n">big</span><span class="p">);</span>

<span class="c1">// 普通计数法：使用f
</span><span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">普通计数法，小数点后7位（包括多余的0）：</span><span class="se">\n</span><span class="s">  "</span>
        <span class="s">"small = %.7f, big = %.7f"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">small</span><span class="p">,</span> <span class="n">big</span><span class="p">);</span>

<span class="c1">// 科学计数法：使用e
// 大写E决定指数符号大写
</span><span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">科学计数法，小数点后7位（包括多余的0）：</span><span class="se">\n</span><span class="s">  "</span>
        <span class="s">"small = %.7e, big = %.7E"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">small</span><span class="p">,</span> <span class="n">big</span><span class="p">);</span>

<span class="c1">// 动态控制最小宽度、精度：使用*作占位符
</span><span class="kt">int</span> <span class="n">leastWidth</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">动态控制最小宽度、精度：%+-*.*f"</span>   <span class="c1">// 正号+、左对齐-、动态最小宽度*、精度*、普通计数法f
</span>        <span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">,</span> <span class="n">leastWidth</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">small</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-set-precision-printf.png" alt="set precision in printf" /></p>

<hr />

<p>stream</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">double</span> <span class="n">small</span> <span class="o">=</span> <span class="mf">0.003406000400001</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">big</span> <span class="o">=</span> <span class="mf">42.213</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">ios_base</span><span class="o">::</span><span class="n">fmtflags</span> <span class="n">defaultFlags</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">();</span>

<span class="c1">// 7位有效数字，去掉多余的0（默认），输出普通计数法和科学计数法中较短的
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"7位有效数字，去掉多余的0：</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
          <span class="o">&lt;&lt;</span> <span class="s">"small = "</span> <span class="o">&lt;&lt;</span> <span class="n">small</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="s">", big = "</span> <span class="o">&lt;&lt;</span> <span class="n">big</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>

<span class="c1">// 7位有效数字，显示多余的0和小数点：std::defaultfloat，C++11 开始可用
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"7位有效数字，显示多余的0：</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">showpoint</span>
          <span class="o">&lt;&lt;</span> <span class="s">"small = "</span> <span class="o">&lt;&lt;</span> <span class="n">small</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="s">", big = "</span> <span class="o">&lt;&lt;</span> <span class="n">big</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">noshowpoint</span><span class="p">;</span>

<span class="c1">// 普通计数法：使用 std::fixed
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"普通计数法，小数点后7位（包括多余的0）：</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">fixed</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
          <span class="o">&lt;&lt;</span> <span class="s">"small = "</span> <span class="o">&lt;&lt;</span> <span class="n">small</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="s">", big = "</span> <span class="o">&lt;&lt;</span> <span class="n">big</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">fixed</span><span class="p">);</span>

<span class="c1">// 科学计数法：使用 std::scientific
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"科学计数法，小数点后7位（包括多余的0）：</span><span class="se">\n</span><span class="s">  "</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">scientific</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
          <span class="o">&lt;&lt;</span> <span class="s">"small = "</span> <span class="o">&lt;&lt;</span> <span class="n">small</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">flush</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">uppercase</span>
          <span class="o">&lt;&lt;</span> <span class="s">", big = "</span> <span class="o">&lt;&lt;</span> <span class="n">big</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">resetiosflags</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">scientific</span><span class="o">|</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">uppercase</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
    
<span class="c1">// 动态控制最小宽度、精度
</span><span class="kt">int</span> <span class="n">leastWidth</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">precision</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"动态控制最小宽度、精度："</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">showpos</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">fixed</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="n">precision</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="n">leastWidth</span><span class="p">)</span>
          <span class="o">&lt;&lt;</span> <span class="n">small</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">(</span><span class="n">defaultFlags</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">precision</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-set-precision-stream.png" alt="set precision in stream" /></p>

<h1 id="section-5">其他格式</h1>

<h2 id="stdinternal">std::internal</h2>

<p>和 <code class="highlighter-rouge">std::left</code>、<code class="highlighter-rouge">std::right</code> 一样，是 <code class="highlighter-rouge">std::adjustfield</code> 系列。在设置了宽度的前提下，将符号（十进制正负号、进制符号<code class="highlighter-rouge">0</code>、<code class="highlighter-rouge">0x</code>）左对齐，将数字右对齐</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">ios_base</span><span class="o">::</span><span class="n">fmtflags</span> <span class="n">defaultFlags</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">internal</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">hex</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">showbase</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">flags</span><span class="p">(</span><span class="n">defaultFlags</span><span class="p">);</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-internal-stream.png" alt="std::internal" /></p>

<hr />

<h2 id="stdboolalpha">std::boolalpha</h2>

<p>这个可以让布尔类型以 <code class="highlighter-rouge">true</code>、<code class="highlighter-rouge">false</code> 的形式显示</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// C++ code
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="nb">true</span> <span class="o">&lt;&lt;</span> <span class="sc">' '</span> <span class="o">&lt;&lt;</span> <span class="nb">false</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">boolalpha</span>
          <span class="o">&lt;&lt;</span> <span class="nb">true</span> <span class="o">&lt;&lt;</span> <span class="sc">' '</span> <span class="o">&lt;&lt;</span> <span class="nb">false</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
          <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">noboolalpha</span><span class="p">;</span>
</code></pre>
</div>

<p><img src="http://7xrahq.com1.z0.glb.clouddn.com/printf-and-stream-boolalpha-stream.png" alt="std::boolalpha" /></p>

          <a id="article-end-anchor"></a>
          <!-- comment.html starts -->
<hr class="hr-below-something">


<!-- 多说 Share start -->
<div class="ds-share"
    style=""
    data-thread-key="/2016/03/13/output-format-comparison-between-printf-and-stream"
    data-title="常用输出格式归纳：printf 和 stream"
    data-url="https://matrixans.github.io/2016/03/13/output-format-comparison-between-printf-and-stream.html"
    data-images=""
    data-content="| matrix answer" >
    <div class="pseudo-ds-meta"></div>
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">
        <li data-toggle="ds-share-icons-more"><a class="ds-more" href="#">Share on</a></li>
        <li><a class="ds-wechat flat" href="javascript:;" data-service="wechat">Wechat</a></li>
        <li><a class="ds-weibo flat" href="javascript:;" data-service="weibo">Weibo</a></li>
        <li> <a class="ds-twitter flat" href="javascript:;" data-service="twitter">Twitter</a> </li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
</div>
<!-- 多说 Share end-->



<ul class="pager">
    
    <li class="previous">
        <a href="/2016/02/20/merge-sort.html" data-toggle="tooltip" data-placement="top" title="合并排序">&larr; Previous Post</a>
    </li>
    
    
</ul>

<!-- 多说评论框 starts -->

<div class="ds-thread"
     data-thread-key="/2016/03/13/output-format-comparison-between-printf-and-stream"
     data-title="常用输出格式归纳：printf 和 stream"
     data-url="https://matrixans.github.io/2016/03/13/output-format-comparison-between-printf-and-stream.html">
</div>

<!-- 多说评论框 ends -->

<!-- disqus 评论框 start -->

<!-- disqus 评论框 end -->


<!-- comment.html ends -->
          
      </div>
    <!-- Side Catalog Container -->

      <div class="
          col-lg-2 col-lg-offset-0
          visible-lg-block
          sidebar-container
          catalog-container">
          <div class="side-catalog">
              <h5>
                  <a class="catalog-toggle" href="#">CATALOG</a>
              </h5>
              <ul class="catalog-body"></ul>
          </div>
      </div>

      <!-- sidebar container -->
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1
                sidebar-container">
        <!-- featured-tags.html starts -->

<section>
  <hr class="hr-below-something">
  <h5>FEATURED TAGS</h5>
  <div class="tags">
    
    
    <a href="/tags.html#排序" title="排序" rel="1">排序</a>
    
    
    
    <a href="/tags.html#归纳" title="归纳" rel="1">归纳</a>
    
    
    
    <a href="/tags.html#C / C++" title="C / C++" rel="1">C / C++</a>
    
    
  </div>
</section>

<!-- featured-tags.html ends -->
        <!-- friends.html starts -->

<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
</ul>

<!-- friends.html ends -->
      </div>
    </div>
  </div>
</article>



<!-- async load function -->
<script>
  function async(u, c) {
    var d = document, t = 'script',
        o = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
    anchors.options = {
      visible: 'always',
      placement: 'right',
      icon: '#'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  })
</script>


<script src="/js/jquery.js"></script>
<!--<script src="/js/jquery.nav.js"></script>
<script src="/js/highlight.pack.js"></script>-->

<script type="text/javascript">
  async("/js/jquery.nav.js", function() {
    async("/js/highlight.pack.js", function() {
       $(document).ready(function() {
         var lanMap = {
           "language-kramdown": 'language-markdown',
           "language-trueBash": 'language-bash',
           "language-git": 'language-bash'
         };
         hljs.configure({"lineNode": true});
         $('pre code').each(function(i, e) {
          var result = this.className.match(/language-[\w]{1,}/);
          if (!result) return;
          if (lanMap[result[0]]) {
            this.classList.remove(result[0]);
            this.classList.add(lanMap[result[0]]);
          }
          hljs.highlightBlock(this);
        });
        $('div.highlighter-rouge').each(function(i, e) {
          var code = $(this).find('code');
          var result = $(this).attr('class').match(/language-[\w]{1,}/);
          if (result) code.addClass(result[0]);
          hljs.highlightBlock(code[0]);
        });
      });
      function generateCatalog (selector) {
          var P = $('div.post-container'),a,n,t,l,i,c;
          a = P.find('h1,h2,h3,h4,h5,h6');
          a.each(function () {
              n = $(this).prop('tagName').toLowerCase();
              i = "#"+$(this).prop('id');
              t = $(this).text();
              c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
              l = $('<li class="'+n+'_nav"></li>').append(c);
              $(selector).append(l);
          });
          return true;    
      }

      generateCatalog(".catalog-body");

      // toggle side catalog
      $(".catalog-toggle").click((function(e){
          e.preventDefault();
          $('.side-catalog').toggleClass("fold")
      }));

      $('.catalog-body').onePageNav({
        currentClass: "active",
        changeHash: !1,
        easing: "swing",
        filter: "",
        scrollSpeed: 700,
        scrollOffset: 100,
        scrollThreshold: 0,
        begin: null,
        end: null,
        scrollChange: null,
        endSelector: '#article-end-anchor',
        unbindSelector: null
      });
    });
    
  });
</script>


    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          <!--
          <li>
              <a href="/feed.xml">
                  <span class="fa-stack fa-lg">
                      <i class="fa fa-circle fa-stack-2x"></i>
                      <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                  </span>
              </a>
          </li>
          -->
          
        </ul>
        <p class="copyright text-muted">
          
          Copyright &copy; Mensu 2016 - 
          <br/>
          Theme edited by <a href="https://github.com/Mensu">Mensu</a> |
          <iframe frameborder="0" scrolling="0" src="https://ghbtns.com/github-btn.html?user=Mensu&repo=mensu.github.io&type=star&count=true" >
          </iframe>
          <br/>
          forked from <a href="http://huangxuan.me">Hux</a> |
          <iframe frameborder="0" scrolling="0" src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
          </iframe>
        </p>
      </div>
    </div>
  </div>
</footer>


<script src="/js/jquery.js "></script>
<script src="/js/hux-blog.js "></script>
<script src="/js/bootstrap.js"></script>

<!-- 多说公共JS代码 starts -->

<script type="text/javascript">
var duoshuoQuery = {short_name:"mensu"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    //ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.src = "/js/duoshuo-embed.js";
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>

<!-- 多说公共JS代码 ends -->

<script src="/js/mensu-blog.js"></script>

<!-- disqus 公共JS代码 starts -->

<!-- disqus 公共JS代码 ends -->

<!-- async load function -->
<script>
  function async(u, c) {
  var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
  s.parentNode.insertBefore(o, s);
  }
</script>

<!-- Highlight.js -->
<script>
  // async("/js/highlight.min.js", function(){
  //     hljs.initHighlightingOnLoad();
  // })
  // only load tagcloud.js in tag.html
  if($('#tag_cloud').length !== 0){
      async("/js/jquery.tagcloud.js",function(){
          $.fn.tagcloud.defaults = {
              //size: {start: 1, end: 1, unit: 'em'},
              color: {start: '#bbbbee', end: '#0085a1'},
          };
          $('#tag_cloud a').tagcloud();
      })
  }
</script>
<!--<link href="/css/github.min.css" rel="stylesheet">-->

<!--fastClick.js -->
<script>
    async("/js/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>
</html>
